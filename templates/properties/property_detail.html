{% extends "_base.html" %}
{% block title %}Properties:{{ property.title }}{%endblock %}
{% load stage_details %}


<!-- Content Wrapper. Contains page content -->
{% block content %}

{% stage_opportunity as stage_opportunity %}
{% stage_buying as stage_buying %}
{% stage_renovation as stage_renovation %}
{% stage_rent as stage_rent %}
{% stage_tenant as stage_tenant %}
{% renovation_teams as renovation_teams %}
{% expense_tables as expense_tables %}
{% all_contracts_modal as all_contracts_modal %}
{% all_contracts_tab as all_contracts_tab %}
{% monthly_maintenance_model_list as monthly_maintenance_model_list %}

<!-- BEGIN: Content-->
<div class="app-content content">

    <div class="content-wrapper">
        <div class="content-header row">
              
        </div>
        <div class="content-body">
            <!-- page user profile start -->
        
     
            <section class="page-user-profile">
                <h1>{{ property.title }}</h1>  
                <div class="row">
                    <div class="col-12">
                        <div class="row">
                            <div class="col-lg-12">
                                <div class="tab-content">
                                    <div class="tab-pane active" id="feed" aria-labelledby="feed-tab" role="tabpanel">
                                        <div class="row">
                                            <!-- Property Gallery -->
                                            <div class="col-lg-4">
                                                <div class="card">
                                                    <div class="card-content">
                                                        <div class="card-body">
                                                            <h5 class="card-title mb-1">Gallery

                                                                <button type="button"
                                                                    class="btn btn-icon btn-warning mr-1 mb-1 float-right"><i
                                                                        data-toggle="modal" data-target="#uploadModal"
                                                                        class="cursor-pointer bx bx-archive float-right"></i></button>
                                                            </h5>
                                                            <div class="row" style="height: 330px;overflow-x: auto;">
                                                                {% for property_image in property_images %}
                                                                <div class="col-md-6 col-6 pl-25 pr-0 pb-25">
                                                                    <img src="{{ property_image.image.url }}"
                                                                        class="img-fluid" alt="gallery avtar img">
                                                                </div>
                                                                {% endfor %}
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div id="uploadModal" class="modal fade" role="dialog">
                                                    <div class="modal-dialog">
                                                        <div class="modal-content">
                                                            <div class="modal-header">
                                                                <h4 class="modal-title">Image upload form</h4>
                                                                <button type="button" class="close"
                                                                    data-dismiss="modal">&times;</button>
                                                            </div>
                                                            <div class="modal-body">
                                                                <div id='preview'
                                                                    style="margin-bottom: 0px;display: none;">

                                                                </div>
                                                                <form method='post' action=''
                                                                    enctype="multipart/form-data"
                                                                    id="ajax_image_upload">
                                                                    {% csrf_token %}
                                                                    <input type="hidden" name="property_id"
                                                                        value="{{property.pk}}">

                                                                    Select Image : <input type='file'
                                                                        name='image_upload' id='image_upload'
                                                                        class='form-control'
                                                                        onchange="preview_Timage();" required="required"
                                                                        accept="image/*" multiple><br>

                                                                    <button type="submit"
                                                                        class='btn btn-info'>Upload</button>
                                                                </form>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- Current tenant & owner-->
                                            <div class="col-lg-8">
                                                <!-- Current tenant -->
                                                <div class="card">
                                                    <div class="card-header">
                                                        <div class="card-title-details d-flex align-items-center">

                                                            <div>
                                                                <h5>Tenant - {{ property.reviews.all.0.full_name }}</h5>

                                                            </div>
                                                        </div>
                                                        <div class="heading-elements">
                                                            <i
                                                                class="bx bx-dots-vertical-rounded font-medium-3 align-middle"></i>
                                                        </div>
                                                    </div>
                                                    <div class="card-content">
                                                        <div class="card-body">
                                                            <div class="table-responsive">
                                                                <table class="table table-borderless">
                                                                    <tbody>
                                                                        <tr>
                                                                            <td class="pb-0 pl-0">
                                                                                <strong>Contract Start
                                                                                    Date</strong></td>
                                                                            <td class="pb-0 pl-0">
                                                                                <strong>Contract End
                                                                                    Date</strong></td>

                                                                            <td class="pb-0">
                                                                                <strong>Rent</strong></td>
                                                                            <td class="pb-0">
                                                                                <strong>Status</strong>
                                                                            </td>

                                                                        </tr>
                                                                        <tr>
                                                                            {% property_tenant_contract property as PRContact %}
                                                                            <td class="pl-0">
                                                                                <div
                                                                                    class="badge badge-light-primary text-bold-500 py-50">
                                                                                    {{PRContact.start_date}}</div>
                                                                            </td>
                                                                            <td class="pl-0">
                                                                                <div
                                                                                    class="badge badge-light-warning text-bold-500 py-50">
                                                                                    {{PRContact.end_date}}</div>
                                                                            </td>

                                                                            <td><span
                                                                                    class="badge badge-success">{{PRContact.rent_tenant}}</span>
                                                                            </td>
                                                                            <td><span
                                                                                    class="badge badge-light-success">{{PRContact.contract_status}}</span>
                                                                            </td>
                                                                        </tr>
                                                                    </tbody>
                                                                </table>
                                                            </div>

                                                        </div>
                                                    </div>
                                                </div>
                                                <!-- Current owner -->
                                                <div class="card">
                                                    <div class="card-header">
                                                        <div class="card-title-details d-flex align-items-center">

                                                            <div>
                                                                <h5>Owner</h5>
                                                            </div>
                                                        </div>
                                                        <div class="heading-elements">
                                                            <i
                                                                class="bx bx-dots-vertical-rounded font-medium-3 align-middle"></i>
                                                        </div>
                                                    </div>
                                                    <div class="card-content">
                                                        <div class="card-body">
                                                            <div class="table-responsive">
                                                                <table class="table table-borderless">
                                                                    <tbody>
                                                                        <tr>
                                                                            <td class="pb-0 pl-0">
                                                                                <strong>Contract Start
                                                                                    Date</strong></td>
                                                                            <td class="pb-0 pl-0">
                                                                                <strong>Contract End
                                                                                    Date</strong></td>

                                                                            <td class="pb-0">
                                                                                <strong>Rent</strong></td>
                                                                            <td class="pb-0">
                                                                                <strong>Status</strong>
                                                                            </td>
                                                                            <td class="pb-0">
                                                                                <strong>Upcoming Rent
                                                                                    Date</strong></td>
                                                                        </tr>
                                                                        <tr>
                                                                            <td class="pl-0">
                                                                                <div
                                                                                    class="badge badge-light-primary text-bold-500 py-50">
                                                                                    02 Apr 2019</div>
                                                                            </td>
                                                                            <td class="pl-0">
                                                                                <div
                                                                                    class="badge badge-light-warning text-bold-500 py-50">
                                                                                    06 May 2019</div>
                                                                            </td>

                                                                            <td><span
                                                                                    class="badge badge-success">500</span>
                                                                            </td>
                                                                            <td><span
                                                                                    class="badge badge-light-success">Under
                                                                                    Contract</span>
                                                                            </td>
                                                                            <td>01.01.2020</td>
                                                                        </tr>
                                                                    </tbody>
                                                                </table>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <section id="basic-tabs-components">
                            <div class="card pb-2">



                                <div class="card-header">
                                    <div class="d-inline-block mt-25">
                                        <h6 class="mb-0 text-bold-500">Monthly Maintenance</h6>
                                    </div>
                                    <div class="float-right">
                                        <button type="button" class="btn btn-outline-primary" data-toggle="modal"
                                            data-target="#choose-contract-modal">
                                            Add Tenant
                                        </button>
                                    </div>
                                </div>
                                <div class="modal fade text-left" id="choose-contract-modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel160"
                                    aria-hidden="true">
                                    <div class="modal-dialog" role="document">
                                        <form class="form-stage" data-api_url="{% url 'property-api:add-contract-in-monthly-expense' %}" data-reload="true">
                                            <div class="modal-content">
                                                <div class="modal-header bg-primary">
                                                    <h5 class="modal-title white" id="myModalLabel160">Primary Modal</h5>
                                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                        <i class="bx bx-x"></i>
                                                    </button>
                                                </div>
                                                <div class="modal-body">
                                                    <div class="col-12">
                                                        <div class="form-group">
                                                            <label for="choose-contract">Choose Contract</label>
                                                            <select name="contract" id="choose-contract" class="form-control">
                                                                <option class="form-control" value="">Choose Contract</option>
                                                                {% for contract in all_contracts_modal %}
                                                                    <option class="form-control" value="{{ contract.id }}">{{ contract.tenant.full_name }}</option>
                                                                {% endfor %}
                                                            </select>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="modal-footer">
                                                    <button type="button" class="btn btn-danger" data-dismiss="modal">
                                                        <i class="bx bx-x d-block d-sm-none"></i>
                                                        <span class="d-none d-sm-block">Close</span>
                                                    </button>
                                                    <button type="button" class="btn btn-success ml-1 modal-submit-button" data-dismiss="modal">
                                                        <i class="bx bx-check d-block d-sm-none"></i>
                                                        <span class="d-none d-sm-block">Accept</span>
                                                    </button>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>


                                <div class="card-content">
                                    <div class="card-body">

                                        <ul class="nav nav-tabs" role="tablist">

                                            <li class="nav-item">
                                                <a class="nav-link" id="without-tenant" data-toggle="tab"
                                                    href="#without-tenant-tab" aria-controls="renovation-stage" role="tab"
                                                    aria-selected="false">
                                                    <i class="bx bx-user align-middle"></i>
                                                    <span class="align-middle">Without Tenant</span>
                                                </a>
                                            </li>
                                            {% for contract in all_contracts_tab %}
                                                <li class="nav-item">
                                                    <a class="nav-link" id="tenant-contract-{{forloop.counter}}" data-toggle="tab"
                                                        href="#tenant-contract-{{forloop.counter}}-tab" aria-controls="tenant-contract-{{forloop.counter}}" role="tab"
                                                        aria-selected="false">
                                                        <i class="bx bx-user align-middle"></i>
                                                        <span class="align-middle">{{ contract.tenant.full_name }}</span>
                                                    </a>
                                                </li>
                                            {% endfor %}
                                        </ul>
                                        <div class="tab-content">
                                            <div class="tab-pane" id="without-tenant-tab" aria-labelledby="renovation-stage-tab"
                                                role="tabpanel">
                                                <!-- Monthly Maintenance -->
                                                <section id="basic-pills">
                                                    <div class="row match-height">
                                                        <div class=" col-lg-12">
                                                            <div class="card bg-transparent shadow-none border-none">
                                                                <div class="card-content">
                                                                    <div class="card-body">
                                                                        <ul class="nav nav-pills">
                                                                            <li class="nav-item">
                                                                                <a class="nav-link active" id="create_monthly_maintenance_model-tab"
                                                                                    data-toggle="pill" href="#create_monthly_maintenance_model_{{forloop.counter}}"
                                                                                    aria-expanded="true">Create
                                                                                    Table</a>
                                                                            </li>
                                                                            <li class="nav-item d-none">
                                                                                <a class="nav-link" id="home-tab"
                                                                                    data-toggle="pill" href="#home"
                                                                                    aria-expanded="true">Table Title</a>
                                                                            </li>
                                                                            
                                                                            {% for monthly_maintenance_model in monthly_maintenance_model_list %}
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link"
                                                                                        id="monthly_maintenance_model_{{forloop.counter}}-tab" data-toggle="pill"
                                                                                        href="#monthly_maintenance_model_{{forloop.counter}}"
                                                                                        aria-expanded="false">{{monthly_maintenance_model.name}}
                                                                                    </a>
                                                                                </li>
                                                                            {% endfor %}
                                                                                

                                                                        </ul>
                                                                        <div class="tab-content">
                                                                            <div role="tabpanel" class="tab-pane active"
                                                                                id="create_monthly_maintenance_model_{{forloop.counter}}" aria-labelledby="create_monthly_maintenance_model_{{forloop.counter}}-tab"
                                                                                aria-expanded="true">
                                                                                <form class="form-stage" data-api_url="{% url 'property-api:create-monthly-maintenance-model' %}" data-name="Monthly Maintenance" data-reload="true">
                                                                                    <button type="button"
                                                                                        class="btn btn-primary float-right modal-submit-button">Create</button>
                                                                                    <div class="col-12 col-sm-6">

                                                                                        <div class="form-group">
                                                                                            <label
                                                                                                for="property-renovation-investor">Table
                                                                                                Name</label>
                                                                                            <input type="text"
                                                                                                class="form-control"
                                                                                                value=""
                                                                                                id="monthly-maintenance-model-name"
                                                                                                name="name"
                                                                                                placeholder="Enter Name of Monthly Expense Model Name">

                                                                                        </div>
                                                                                    </div>
                                                                                </form>
                                                                            </div>
                                                                            
                                                                            {% for monthly_maintenance_model in monthly_maintenance_model_list %}
                                                                                <div class="tab-pane" id="monthly_maintenance_model_{{forloop.counter}}"
                                                                                    role="tabpanel"
                                                                                    aria-labelledby="monthly_maintenance_model_{{forloop.counter}}-tab"
                                                                                    aria-expanded="false">
                                                                                    <div class="float-right">
                                                                                        <button data-toggle="modal"
                                                                                            data-target="#create-monthly-maintenance-{{forloop.counter}}"
                                                                                            class="btn btn-icon btn-success add-expense-tenant-monthly-main">Add Monthly Maintenance</button>
                                                                                    </div>
                                                                                    <br>
                                                                                    <br>
                                                                                    <div class="modal fade"
                                                                                        id="create-monthly-maintenance-{{forloop.counter}}"
                                                                                        tabindex="-1" role="dialog"
                                                                                        aria-labelledby="create-monthly-maintenance-{{forloop.counter}}"
                                                                                        aria-hidden="true">
                                                                                        <div class="modal-dialog" role="document">
                                                                                            <div class="modal-content">
                                                                                                <form class="form-stage"
                                                                                                    data-name="Monthly Expense"
                                                                                                    data-api_url="{% url 'property-api:monthly-maintenance-create' %}"
                                                                                                    data-name="Renovation Team Expense"
                                                                                                    data-reload="true">
                                                                                                    <div class="modal-header">
                                                                                                        <h5 class="modal-title">
                                                                                                            Add Monthly Maintenance Expense
                                                                                                        </h5>
                                                                                                        <button type="button"
                                                                                                            class="close"
                                                                                                            data-dismiss="modal"
                                                                                                            aria-label="Cancel">
                                                                                                            <span
                                                                                                                aria-hidden="true">&times;</span>
                                                                                                        </button>
                                                                                                    </div>
                                                                                                    

                                                                                                    <div class="modal-body">
                                                                                                        <input type="text" name="monthly_maintenance_model_id" value="{{monthly_maintenance_model.id}}" class="d-none">
                                                                                                        
                                                                                                        <div class="form-group">
                                                                                                            <input type="text"
                                                                                                                value=""
                                                                                                                style="display: none;"
                                                                                                                name="expense_table_id">
                                                                                                            <label
                                                                                                                for="title">Title</label>
                                                                                                            <input type="text"
                                                                                                                class="form-control"
                                                                                                                value="" id="title"
                                                                                                                name="title"
                                                                                                                placeholder="Enter Title"
                                                                                                                autocomplete="off">
                                                                                                        </div>
                                                                                                        <div class="form-group">
                                                                                                            <label
                                                                                                                for="description">Description</label>
                                                                                                            <input type="text"
                                                                                                                class="form-control"
                                                                                                                value=""
                                                                                                                id="description"
                                                                                                                name="description"
                                                                                                                placeholder="Enter Description"
                                                                                                                autocomplete="off">
                                                                                                        </div>
                                                                                                        <div class="form-group">
                                                                                                            <label
                                                                                                                for="amount">Amount</label>
                                                                                                            <input type="number"
                                                                                                                class="form-control"
                                                                                                                value="" step="0.1"
                                                                                                                id="amount"
                                                                                                                name="amount"
                                                                                                                placeholder="Enter Amount"
                                                                                                                autocomplete="off">
                                                                                                        </div>
                                                                                                        <div class="form-group">
                                                                                                            <label
                                                                                                                for="currency">Currency</label>
                                                                                                            <input type="text"
                                                                                                                class="form-control"
                                                                                                                value="" step="0.1"
                                                                                                                id="currency"
                                                                                                                name="currency"
                                                                                                                placeholder="Enter Currency"
                                                                                                                autocomplete="off">
                                                                                                        </div>
                                                                                                        <div class="form-group">
                                                                                                            <label
                                                                                                                for="account">Account</label>
                                                                                                            <input type="text"
                                                                                                                class="form-control"
                                                                                                                value="" id="account"
                                                                                                                name="account"
                                                                                                                placeholder="Enter Account"
                                                                                                                autocomplete="off">
                                                                                                        </div>
                                                                                                        <div class="form-group">
                                                                                                            <label
                                                                                                                for="date">Date</label>
                                                                                                            <input type="date"
                                                                                                                class="form-control"
                                                                                                                value="" id="date"
                                                                                                                name="date"
                                                                                                                placeholder="Enter Date"
                                                                                                                autocomplete="off">
                                                                                                        </div>
                                                                                                    </div>
                                                                                                    <div class="modal-footer">
                                                                                                        <button type="button"
                                                                                                            class="btn btn-secondary"
                                                                                                            data-dismiss="modal">Cancel</button>
                                                                                                        <button type="button"
                                                                                                            class="btn btn-primary modal-submit-button"
                                                                                                            data-dismiss="modal">Create</button>
                                                                                                    </div>
                                                                                                </form>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                    <table
                                                                                        class="table table-hover text-center"
                                                                                        id="monthly_maintenance_model-datatable-{{forloop.counter}}"
                                                                                        style="width: 100%;"
                                                                                        data-monthly_maintenance_model_id={{monthly_maintenance_model.id}}>
                                                                                        <thead>
                                                                                            <tr>
                                                                                                <th class="text-center">Title</th>
                                                                                                <th class="text-center">Description</th>
                                                                                                <th class="text-center">Amount</th>
                                                                                                <th class="text-center">Currency</th>
                                                                                                <th class="text-center">Account</th>
                                                                                                <th class="text-center">Date</th>
                                                                                            </tr>
                                                                                        </thead>
                                                                                        <tbody class="text-center">
                                                                                        </tbody>
                                                                                    </table>
                                                                                </div>
                                                                                
                                                                            {% endfor %}

                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>

                                                    </div>
                                                </section>
                                                <!-- Monthly Maintenanceend -->

                                            </div>
                                            
                                            {% for contract in all_contracts_tab %}
                                                {% tenant_monthly_maintenance_model_list contract as tenant_monthly_maintenance_models %}
                                                <div class="tab-pane" id="tenant-contract-{{forloop.counter}}-tab" aria-labelledby="renovation-stage-tab"
                                                    role="tabpanel">
                                                    <!-- Monthly Maintenance -->
                                                    <section id="basic-pills">
                                                        <div class="row match-height">
                                                            <div class=" col-lg-12">
                                                                <div class="card bg-transparent shadow-none border-none">

                                                                    <div class="card-content">
                                                                        <div class="card-body">

                                                                            <ul class="nav nav-pills">
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link active" id="create-tenant-maintenance-table-{{contract.id}}-tab"
                                                                                        data-toggle="pill" href="#create-tenant-maintenance-table-{{contract.id}}"
                                                                                        aria-expanded="true">Create
                                                                                        Table</a>
                                                                                </li>
                                                                                <li class="nav-item d-none">
                                                                                    <a class="nav-link" id="home-tab"
                                                                                        data-toggle="pill" href="#home"
                                                                                        aria-expanded="true">Table Title</a>
                                                                                </li>
                                                                                {% for tenant_monthly_maintenance_model in tenant_monthly_maintenance_models %}
                                                                                    
                                                                                    <li class="nav-item">
                                                                                        <a class="nav-link"
                                                                                            id="tenant_monthly_maintenance_model-{{tenant_monthly_maintenance_model.id}}-tab" data-toggle="pill"
                                                                                            href="#tenant_monthly_maintenance_model-{{tenant_monthly_maintenance_model.id}}"
                                                                                            aria-expanded="false">{{tenant_monthly_maintenance_model.name}}
                                                                                        </a>
                                                                                    </li>
                                                                                {% endfor %}
                                                                                    

                                                                            </ul>
                                                                            <div class="tab-content">
                                                                                <div role="tabpanel" class="tab-pane active"
                                                                                id="create-tenant-maintenance-table-{{contract.id}}" aria-labelledby="create-tenant-maintenance-table-{{contract.id}}-tab"
                                                                                aria-expanded="true">
                                                                                    <form class="form-stage" data-api_url="{% url 'property-api:create-tenant-monthly-maintenance-model' %}" data-name="Tenant Monthly Maintenance Model">
                                                                                        <button type="button" class="btn btn-primary modal-submit-button float-right">Create</button>    
                                                                                        <div class="col-12 col-sm-6">
                                                                                            <input type="text"
                                                                                                    class="d-none"
                                                                                                    value="{{contract.id}}"
                                                                                                    name="contract">

                                                                                            <div class="form-group">
                                                                                                <label
                                                                                                    for="create-tenant-monthly-maintenance-model-btn">Table
                                                                                                    Name</label>
                                                                                                <input type="text"
                                                                                                    class="form-control"
                                                                                                    value=""
                                                                                                    id="create-tenant-monthly-maintenance-model-btn"
                                                                                                    name="name"
                                                                                                    placeholder="Enter Name of Tenant Monthly Expense Model `Table">
                                                                                                
                                                                                            </div>

                                                                                        </div>
                                                                                    </form>
                                                                                </div>
                                                                                <div role="tabpanel" class="tab-pane d-none"
                                                                                    id="home" aria-labelledby="home-tab"
                                                                                    aria-expanded="true">
                                                                                    <p>
                                                                                        Display the datatable here with
                                                                                        scroll
                                                                                        bar (some of these tables become
                                                                                        very
                                                                                        long in time). Here will also be a
                                                                                        button with a pop up form to add to
                                                                                        this
                                                                                        table.
                                                                                    </p>

                                                                                    <!-- Zero configuration table -->
                                                                                    <section id="basic-datatable">
                                                                                        <div class="row">
                                                                                            <div class="col-12">
                                                                                                <div class="card">

                                                                                                    <div
                                                                                                        class="card-content">
                                                                                                        <div
                                                                                                            class="card-body card-dashboard">

                                                                                                            <div
                                                                                                                class="table-responsive">
                                                                                                                <table
                                                                                                                    class="table zero-configuration">
                                                                                                                    <thead>
                                                                                                                        <tr>
                                                                                                                            <th>Title
                                                                                                                            </th>
                                                                                                                            <th>Amount
                                                                                                                            </th>
                                                                                                                            <th>Currency
                                                                                                                            </th>
                                                                                                                            <th>Account
                                                                                                                            </th>
                                                                                                                            <th>Description
                                                                                                                            </th>
                                                                                                                            <th>date
                                                                                                                            </th>
                                                                                                                        </tr>
                                                                                                                    </thead>
                                                                                                                    <tbody>
                                                                                                                        <tr>
                                                                                                                            <td>Tiger
                                                                                                                                Nixon
                                                                                                                            </td>
                                                                                                                            <td>System
                                                                                                                                Architect
                                                                                                                            </td>
                                                                                                                            <td>Edinburgh
                                                                                                                            </td>
                                                                                                                            <td>61
                                                                                                                            </td>
                                                                                                                            <td>2011/04/25
                                                                                                                            </td>
                                                                                                                            <td>$320,800
                                                                                                                            </td>
                                                                                                                        </tr>

                                                                                                                    </tbody>
                                                                                                                    <tfoot>
                                                                                                                        <tr>
                                                                                                                            <th>Name
                                                                                                                            </th>
                                                                                                                            <th>Position
                                                                                                                            </th>
                                                                                                                            <th>Office
                                                                                                                            </th>
                                                                                                                            <th>Age
                                                                                                                            </th>
                                                                                                                            <th>Start
                                                                                                                                date
                                                                                                                            </th>
                                                                                                                            <th>Salary
                                                                                                                            </th>
                                                                                                                        </tr>
                                                                                                                    </tfoot>
                                                                                                                </table>
                                                                                                            </div>
                                                                                                        </div>
                                                                                                    </div>
                                                                                                </div>
                                                                                            </div>
                                                                                        </div>
                                                                                    </section>
                                                                                    <!--/ Zero configuration table -->

                                                                                </div>
                                                                                
                                                                                {% for tenant_monthly_maintenance_model in tenant_monthly_maintenance_models %}        
                                                                                    <div class="tab-pane" id="tenant_monthly_maintenance_model-{{tenant_monthly_maintenance_model.id}}"
                                                                                        role="tabpanel"
                                                                                        aria-labelledby="tenant_monthly_maintenance_model-{{tenant_monthly_maintenance_model.id}}-tab"
                                                                                        aria-expanded="false">
                                                                                        <div class="float-right">
                                                                                            <button data-toggle="modal"
                                                                                                data-target="#create-tenant-monthly-maintenance-{{tenant_monthly_maintenance_model.id}}"
                                                                                                class="btn btn-icon btn-success add-tenant-monthly-maintenance-button">Add Tenant Monthly Maintenance</button>
                                                                                        </div>
                                                                                        <br>
                                                                                        <br>
                                                                                        <div class="modal fade"
                                                                                            id="create-tenant-monthly-maintenance-{{tenant_monthly_maintenance_model.id}}"
                                                                                            tabindex="-1" role="dialog"
                                                                                            aria-labelledby="create-tenant-monthly-maintenance-{{tenant_monthly_maintenance_model.id}}"
                                                                                            aria-hidden="true">
                                                                                            <div class="modal-dialog" role="document">
                                                                                                <div class="modal-content">
                                                                                                    <form class="form-stage"
                                                                                                        data-name="Tenant Monthly Expense"
                                                                                                        data-api_url="{% url 'property-api:tenant-monthly-maintenance-create' %}"
                                                                                                        data-reload="true">
                                                                                                        <div class="modal-header">
                                                                                                            <h5 class="modal-title">
                                                                                                                Add Tenant Monthly Maintenance Expense
                                                                                                            </h5>
                                                                                                            <button type="button"
                                                                                                                class="close"
                                                                                                                data-dismiss="modal"
                                                                                                                aria-label="Cancel">
                                                                                                                <span
                                                                                                                    aria-hidden="true">&times;</span>
                                                                                                            </button>
                                                                                                        </div>
                                                                                                        
    
                                                                                                        <div class="modal-body">
                                                                                                            <input type="text" name="tenant_monthly_maintenance_model_id" value="{{tenant_monthly_maintenance_model.id}}" class="d-none">
                                                                                                            
                                                                                                            <div class="form-group">
                                                                                                                <input type="text"
                                                                                                                    value=""
                                                                                                                    style="display: none;"
                                                                                                                    name="expense_table_id">
                                                                                                                <label
                                                                                                                    for="title">Title</label>
                                                                                                                <input type="text"
                                                                                                                    class="form-control"
                                                                                                                    value="" id="title"
                                                                                                                    name="title"
                                                                                                                    placeholder="Enter Title"
                                                                                                                    autocomplete="off">
                                                                                                            </div>
                                                                                                            <div class="form-group">
                                                                                                                <label
                                                                                                                    for="description">Description</label>
                                                                                                            <input type="text"
                                                                                                                class="form-control"
                                                                                                                value=""
                                                                                                                id="description"
                                                                                                                name="description"
                                                                                                                placeholder="Enter Description"
                                                                                                                autocomplete="off">
                                                                                                        </div>
                                                                                                        <div class="form-group">
                                                                                                            <label
                                                                                                                for="amount">Amount</label>
                                                                                                            <input type="number"
                                                                                                                class="form-control"
                                                                                                                value="" step="0.1"
                                                                                                                id="amount"
                                                                                                                name="amount"
                                                                                                                placeholder="Enter Amount"
                                                                                                                autocomplete="off">
                                                                                                        </div>
                                                                                                        <div class="form-group">
                                                                                                            <label
                                                                                                                for="currency">Currency</label>
                                                                                                            <input type="text"
                                                                                                                class="form-control"
                                                                                                                value="" step="0.1"
                                                                                                                id="currency"
                                                                                                                name="currency"
                                                                                                                placeholder="Enter Currency"
                                                                                                                autocomplete="off">
                                                                                                        </div>
                                                                                                        <div class="form-group">
                                                                                                            <label
                                                                                                                for="account">Account</label>
                                                                                                            <input type="text"
                                                                                                                class="form-control"
                                                                                                                value="" id="account"
                                                                                                                name="account"
                                                                                                                placeholder="Enter Account"
                                                                                                                autocomplete="off">
                                                                                                        </div>
                                                                                                        <div class="form-group">
                                                                                                            <label
                                                                                                                for="date">Date</label>
                                                                                                            <input type="date"
                                                                                                                class="form-control"
                                                                                                                value="" id="date"
                                                                                                                name="date"
                                                                                                                placeholder="Enter Date"
                                                                                                                autocomplete="off">
                                                                                                        </div>
                                                                                                    </div>
                                                                                                    <div class="modal-footer">
                                                                                                        <button type="button"
                                                                                                            class="btn btn-secondary"
                                                                                                            data-dismiss="modal">Cancel</button>
                                                                                                        <button type="button"
                                                                                                            class="btn btn-primary modal-submit-button"
                                                                                                            data-dismiss="modal">Create</button>
                                                                                                    </div>
                                                                                                </form>
                                                                                            </div>
                                                                                        </div>
                                                                                        </div>
                                                                                        <table
                                                                                            class="table table-hover text-center"
                                                                                            id="tenant_monthly_maintenance_model-datatable-{{tenant_monthly_maintenance_model.id}}"
                                                                                            style="width: 100%;"
                                                                                            data-tenant_monthly_maintenance_model_id={{tenant_monthly_maintenance_model.id}}>
                                                                                            <thead>
                                                                                                <tr>
                                                                                                    <th class="text-center">Title</th>
                                                                                                    <th class="text-center">Description</th>
                                                                                                    <th class="text-center">Amount</th>
                                                                                                    <th class="text-center">Currency</th>
                                                                                                    <th class="text-center">Account</th>
                                                                                                    <th class="text-center">Date</th>
                                                                                                </tr>
                                                                                            </thead>
                                                                                            <tbody class="text-center">
                                                                                            </tbody>
                                                                                        </table>
                                                                                    </div>
                                                                                {% endfor %}

                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>

                                                        </div>
                                                    </section>
                                                    <!-- Monthly Maintenanceend -->

                                                </div>
                                            {% endfor %}
                                                
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </section>

                        <section id="basic-tabs-components">
                            <div class="card pb-2">
                                <div class="card-header">
                                    <div class="card-title">
                                        <h4>Property Stages</h4>
                                    </div>
                                </div>
                                <div class="card-content">
                                    <div class="card-body">

                                        <ul class="nav nav-tabs" role="tablist">
                                            <li class="nav-item">
                                                <a class="nav-link {% if stage_buying %} disabled {% else %} active {% endif %}"
                                                    id="buying-stage-tab" data-toggle="tab" href="#buying-stage"
                                                    aria-controls="buying-stage" role="tab" aria-selected="true">
                                                    <i class="bx bx-home align-middle"></i>
                                                    <span class="align-middle">Buying Stage</span>
                                                </a>
                                            </li>
                                            <li class="nav-item">
                                                <a class="nav-link {% if stage_buying %} active {% endif %}"
                                                    id="renovation-stage-tab" data-toggle="tab" href="#renovation-stage"
                                                    aria-controls="renovation-stage" role="tab" aria-selected="false">
                                                    <i class="bx bx-user align-middle"></i>
                                                    <span class="align-middle">Renovation Stage</span>
                                                </a>
                                            </li>
                                            <li class="nav-item">
                                                <a class="nav-link {% if stage_rent %} disabled {% endif %}"
                                                    id="rent-stage-tab" data-toggle="tab" href="#rent-stage"
                                                    aria-controls="rent-stage" role="tab" aria-selected="false">
                                                    <i class="bx bx-message-square align-middle"></i>
                                                    <span class="align-middle">Up for Rent</span>
                                                </a>
                                            </li>
                                            <li class="nav-item">
                                                <a class="nav-link {% if stage_tenant %} disabled {% endif %}"
                                                    id="tenant-stage-tab" data-toggle="tab" href="#tenant-stage"
                                                    aria-controls="tenant-stage" role="tab" aria-selected="false">
                                                    <i class="bx bx-message-square align-middle"></i>
                                                    <span class="align-middle">With Tenant</span>
                                                </a>
                                            </li>

                                        </ul>

                                        <div class="tab-content">
                                            <div class="tab-pane {% if stage_buying %} disabled {% else %} active {% endif %}"
                                                id="buying-stage" aria-labelledby="buying-stage-tab" role="tabpanel">
                                                <form class="form-stage"
                                                    data-api_url="{% url 'property-api:stage-buying' %}"
                                                    data-name="Buying Stage" data-reload="true">
                                                    <fieldset class="pt-0">
                                                        <h5 class="py-50">Setup Your Buying Stage Details</h5>
                                                        <div class="row">
                                                            <div class="col-12 col-sm-6 col-md-4">
                                                                <div class="form-group">
                                                                    <label for="property-agent-costs">Agent
                                                                        Costs</label>
                                                                    <div class="input-group mb-0">
                                                                        <div class="input-group-prepend">
                                                                            <span class="input-group-text"
                                                                                id="basic-addon1">$</span>
                                                                        </div>
                                                                        <input type="number" step="0.01" min="0"
                                                                            class="form-control"
                                                                            id="property-agent-costs" value=""
                                                                            name="property-agent-costs"
                                                                            placeholder="Enter Your Agent Costs"
                                                                            aria-label="Potential Rent"
                                                                            aria-describedby="basic-addon1">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-12 col-sm-6 col-md-4">
                                                                <div class="form-group">
                                                                    <label for="property-notary-costs">Notary
                                                                        Costs</label>
                                                                    <div class="input-group mb-0">
                                                                        <div class="input-group-prepend">
                                                                            <span class="input-group-text"
                                                                                id="basic-addon1">$</span>
                                                                        </div>
                                                                        <input type="number" step="0.01" min="0"
                                                                            class="form-control"
                                                                            id="property-notary-costs" value=""
                                                                            name="property-notary-costs"
                                                                            placeholder="Enter Your Notary Costs"
                                                                            aria-label="Potential Rent"
                                                                            aria-describedby="basic-addon1">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-12 col-sm-6 col-md-4">
                                                                <div class="form-group">
                                                                    <label for="property-legal-costs">Legal
                                                                        Costs</label>
                                                                    <div class="input-group mb-0">
                                                                        <div class="input-group-prepend">
                                                                            <span class="input-group-text"
                                                                                id="basic-addon1">$</span>
                                                                        </div>
                                                                        <input type="number" step="0.01" min="0"
                                                                            class="form-control"
                                                                            id="property-legal-costs" value=""
                                                                            name="property-legal-costs"
                                                                            placeholder="Enter Your Legal Costs"
                                                                            aria-label="Potential Rent"
                                                                            aria-describedby="basic-addon1">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-12 col-sm-6 col-md-4">
                                                                <div class="form-group">
                                                                    <label for="property-accountant-costs">Accountant
                                                                        Costs</label>
                                                                    <div class="input-group mb-0">
                                                                        <div class="input-group-prepend">
                                                                            <span class="input-group-text"
                                                                                id="basic-addon1">$</span>
                                                                        </div>
                                                                        <input type="number" step="0.01" min="0"
                                                                            class="form-control"
                                                                            id="property-accountant-costs" value=""
                                                                            name="property-accountant-costs"
                                                                            placeholder="Enter Your Accountant Costs"
                                                                            aria-label="Accountant Costs"
                                                                            aria-describedby="basic-addon1">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-12 col-sm-6 col-md-4">
                                                                <div class="form-group">
                                                                    <label for="property-other-costs">Other
                                                                        Costs</label>
                                                                    <div class="input-group mb-0">
                                                                        <div class="input-group-prepend">
                                                                            <span class="input-group-text"
                                                                                id="basic-addon1">$</span>
                                                                        </div>
                                                                        <input type="number" step="0.01" min="0"
                                                                            class="form-control"
                                                                            id="property-other-costs" value=""
                                                                            name="property-other-costs"
                                                                            placeholder="Enter Your Other Costs"
                                                                            aria-label="Other Costs"
                                                                            aria-describedby="basic-addon1">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-12 col-sm-6 col-md-4">
                                                                <div class="form-group">
                                                                    <label for="property-buy-price">Buy Price</label>
                                                                    <div class="input-group mb-0">
                                                                        <div class="input-group-prepend">
                                                                            <span class="input-group-text"
                                                                                id="basic-addon1">$</span>
                                                                        </div>
                                                                        <input type="number" step="0.01" min="0"
                                                                            class="form-control" id="property-buy-price"
                                                                            name="property-buy-price" value=""
                                                                            placeholder="Enter Your Buy Price"
                                                                            aria-label="Buy Price"
                                                                            aria-describedby="basic-addon1">
                                                                    </div>
                                                                </div>
                                                            </div>

                                                            <div class="col-sm-12">
                                                                <div class="form-group">
                                                                    <label
                                                                        for="property-buying-description">Description</label>
                                                                    <textarea type="text" rows="3" class="form-control"
                                                                        id="property-buying-description"
                                                                        name="property-buying-description" value=""
                                                                        placeholder="Enter Your Description"></textarea>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </fieldset>
                                                    <span
                                                        class="float-sm-right d-flex flex-sm-row flex-column justify-content-end mt-2">
                                                        <button type="submit" class="btn btn-primary">Post
                                                            Stage</button>
                                                    </span>
                                                </form>
                                            </div>
                                            <div class="tab-pane {% if stage_buying %} active {% endif %}"
                                                id="renovation-stage" aria-labelledby="renovation-stage-tab"
                                                role="tabpanel">
                                                <div class="card">
                                                    <div class="card-body">
                                                        <!-- Collapse start -->
                                                        <form class="form-stage"
                                                            data-api_url="{% url 'property-api:stage-renovation' %}"
                                                            data-reload="false">
                                                            <fieldset class="pt-0">
                                                                <h5 class="py-50">Setup Your Renovation Stage Details
                                                                    <button
                                                                        class="btn btn-icon btn-warning edit-button float-right">Edit</button>
                                                                    <button
                                                                        class="btn btn-icon btn-success save-button float-right"
                                                                        style="display: none;">Save</button>
                                                                </h5>
                                                                <div class="row">
                                                                    <div class="col-12 col-sm-6 ">
                                                                        <div class="form-group">
                                                                            <label
                                                                                for="property-renovation-budget">Renovation
                                                                                Budget</label>
                                                                            <div class="input-group mb-0">
                                                                                <div class="input-group-prepend">
                                                                                    <span class="input-group-text"
                                                                                        id="basic-addon1">$</span>
                                                                                </div>
                                                                                <input disabled
                                                                                    value="{{stage_renovation.renovation_budget}}"
                                                                                    type="number" step="0.01" min="0"
                                                                                    class="form-control"
                                                                                    id="property-renovation-budget"
                                                                                    value="{{stage_buying.legal_costs}}"
                                                                                    name="property-renovation-budget"
                                                                                    placeholder="Enter Your Renovation Budget"
                                                                                    aria-label="Renovation Budget"
                                                                                    aria-describedby="basic-addon1">
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-12 col-sm-6 ">
                                                                        <div class="form-group">
                                                                            <label
                                                                                for="property-renovation-date-receiving-money">Date
                                                                                Receiving Money</label>
                                                                            <input disabled
                                                                                value="{{stage_renovation.get_date_receiving_money}}"
                                                                                type="date" class="form-control"
                                                                                id="property--date-receiving-money"
                                                                                name="property-renovation-date-receiving-money"
                                                                                placeholder="Enter Date Receiving Money"
                                                                                aria-label="Date Receiving Money"
                                                                                aria-describedby="basic-addon1">
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-12 col-sm-6">
                                                                        <div class="form-group">
                                                                            <label
                                                                                for="property-renovation-investor">Investor</label>
                                                                            <input disabled type="text"
                                                                                class="form-control"
                                                                                value="{{stage_renovation.investor}}"
                                                                                id="property-renovation-investor"
                                                                                name="property-renovation-investor"
                                                                                placeholder="Enter Name of Investor">
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-12 col-sm-6 ">
                                                                        <div class="form-group">
                                                                            <label
                                                                                for="property-renovation-date-receiving-key">Date
                                                                                Receiving Key</label>
                                                                            <input disabled type="date"
                                                                                class="form-control"
                                                                                id="property-renovation-date-receiving-key"
                                                                                name="property-renovation-date-receiving-key"
                                                                                value="{{stage_renovation.get_date_receiving_key}}"
                                                                                placeholder="Enter Receiving Date"
                                                                                aria-label="Receiving Date"
                                                                                aria-describedby="basic-addon1">
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-sm-12">
                                                                        <div class="form-group">
                                                                            <label
                                                                                for="property-renovation-description">Description</label>
                                                                            <textarea disabled type="text" rows="3"
                                                                                class="form-control"
                                                                                id="property-renovation-description"
                                                                                name="property-renovation-description"
                                                                                placeholder="Enter Your Description">{{ stage_renovation.description }}</textarea>
                                                                        </div>
                                                                    </div>

                                                                </div>
                                                            </fieldset>
                                                        </form>
                                                        <div class="text-center">
                                                            <button data-toggle="modal"
                                                                data-target="#create-renovation-team"
                                                                class="btn btn-icon btn-primary"
                                                                {% if not stage_renovation %}disabled{% endif %}>Create
                                                                Renovation Team</button>
                                                            <button data-toggle="modal"
                                                                data-target="#create-expense-table"
                                                                class="btn btn-icon btn-info"
                                                                {% if not renovation_teams %}disabled{% endif %}>Create
                                                                Expense Table</button>
                                                        </div>

                                                        <div class="modal fade" id="create-renovation-team"
                                                            tabindex="-1" role="dialog"
                                                            aria-labelledby="create-renovation-team" aria-hidden="true">
                                                            <div class="modal-dialog" role="document">
                                                                <div class="modal-content">
                                                                    <form class="form-stage" data-name="Renovation Team"
                                                                        data-api_url="{% url 'property-api:renovation-team-create' %}"
                                                                        data-reload="true">
                                                                        <div class="modal-header">
                                                                            <h5 class="modal-title"
                                                                                id="create-renovation-team">Create
                                                                                Renovation Team</h5>
                                                                            <button type="button" class="close"
                                                                                data-dismiss="modal"
                                                                                aria-label="Cancel">
                                                                                <span aria-hidden="true">&times;</span>
                                                                            </button>
                                                                        </div>
                                                                        <div class="modal-body">
                                                                            <div class="form-group">
                                                                                <label for="company-name">Company
                                                                                    Name</label>
                                                                                <input type="text" class="form-control"
                                                                                    value="" id="company-name"
                                                                                    name="company-name"
                                                                                    placeholder="Enter Name of Company"
                                                                                    autocomplete="off">
                                                                            </div>
                                                                        </div>
                                                                        <div class="modal-footer">
                                                                            <button type="button"
                                                                                class="btn btn-secondary"
                                                                                data-dismiss="modal">Cancel</button>
                                                                            <button type="button"
                                                                                class="btn btn-primary modal-submit-button"
                                                                                data-dismiss="modal">Create</button>
                                                                        </div>
                                                                    </form>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <div class="modal fade" id="create-expense-table" tabindex="-1"
                                                            role="dialog" aria-labelledby="create-expense-tableLabel"
                                                            aria-hidden="true">
                                                            <div class="modal-dialog" role="document">
                                                                <div class="modal-content">
                                                                    <form class="form-stage" data-name="Expense Table"
                                                                        data-api_url="{% url 'property-api:expense-table-create' %}"
                                                                        data-name="Expense Table"
                                                                        data-reload="true">
                                                                        <div class="modal-header">
                                                                            <h5 class="modal-title"
                                                                                id="create-expense-tableLabel">Create
                                                                                Expense Table</h5>
                                                                            <button type="button" class="close"
                                                                                data-dismiss="modal"
                                                                                aria-label="Cancel">
                                                                                <span aria-hidden="true">&times;</span>
                                                                            </button>
                                                                        </div>
                                                                        <div class="modal-body">
                                                                            <div class="form-group">
                                                                                <label
                                                                                    for="expense-table-name">Renovation
                                                                                    Team</label>
                                                                                <select class="form-control"
                                                                                    id="renovation-team"
                                                                                    name="renovation-team">

                                                                                    {% for renovation_team in renovation_teams %}
                                                                                    <option
                                                                                        value="{{ renovation_team.id }}">
                                                                                        {{ renovation_team.company_name }}
                                                                                    </option>
                                                                                    {% endfor %}

                                                                                </select>
                                                                            </div>
                                                                            <div class="form-group">
                                                                                <label
                                                                                    for="expense-table-name">Name</label>
                                                                                <input type="text" class="form-control"
                                                                                    value="" id="expense-table-name"
                                                                                    name="expense-table-name"
                                                                                    placeholder="Enter Name of Expense table"
                                                                                    autocomplete="off">
                                                                            </div>
                                                                        </div>
                                                                        <div class="modal-footer">
                                                                            <button type="button"
                                                                                class="btn btn-secondary"
                                                                                data-dismiss="modal">Cancel</button>
                                                                            <button type="button"
                                                                                class="btn btn-primary modal-submit-button"
                                                                                data-dismiss="modal">Create</button>
                                                                        </div>
                                                                    </form>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <br>
                                                        <section id="collapsible">
                                                            <div class="collapsible">
                                                                <div class="card collapse-header">
                                                                    <div id="renovation-team-list-div"
                                                                        class="card-header" data-toggle="collapse"
                                                                        role="button"
                                                                        data-target="#renovation-team-list-card"
                                                                        aria-expanded="false"
                                                                        aria-controls="renovation-team-list-card">
                                                                        <span class="collapse-title">
                                                                            Renovation Team List
                                                                            <div class="float-right">
                                                                                <button
                                                                                    class="btn btn-icon btn-success edit-button d-none">Create
                                                                                    Renovation Team</button>
                                                                            </div>
                                                                        </span>
                                                                    </div>

                                                                    <div id="renovation-team-list-card" role="tabpanel"
                                                                        aria-labelledby="renovation-team-list-div"
                                                                        class="collapse">
                                                                        <div class="card-content">
                                                                            <div class="card-body">
                                                                                <table
                                                                                    class="table table-hover text-center"
                                                                                    id="renovation-team-list"
                                                                                    style="width: 100%;">
                                                                                    <thead>
                                                                                        <tr>
                                                                                            <th class="text-center">
                                                                                                Company Name</th>
                                                                                            <th class="text-center">Date
                                                                                                Joined</th>
                                                                                            <th class="text-center">
                                                                                                Action</th>
                                                                                        </tr>
                                                                                    </thead>
                                                                                    <tbody class="text-center">
                                                                                    </tbody>
                                                                                </table>

                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>



                                                                {% for expense_table in expense_tables %}
                                                                <div class="card collapse-header">
                                                                    <div id="expenseTableCollapse{{forloop.counter}}"
                                                                        class="card-header" data-toggle="collapse"
                                                                        role="button"
                                                                        data-target="#collapse{{forloop.counter}}"
                                                                        aria-expanded="false"
                                                                        aria-controls="collapse{{forloop.counter}}">
                                                                        <span class="collapse-title primary">


                                                                            {{expense_table.name}} |

                                                                            {{expense_table.renovation_team.company_name}}


                                                                            <div class="float-right">
                                                                                <button data-toggle="modal"
                                                                                    data-target="#create-renovation-team-expense-{{forloop.counter}}"
                                                                                    class="btn btn-icon btn-primary add-expense-tenant-monthly-main">Add
                                                                                    Expense</button>
                                                                            </div>
                                                                        </span>
                                                                    </div>

                                                                    <div class="modal fade"
                                                                        id="create-renovation-team-expense-{{forloop.counter}}"
                                                                        tabindex="-1" role="dialog"
                                                                        aria-labelledby="create-renovation-team-expense-{{forloop.counter}}"
                                                                        aria-hidden="true">
                                                                        <div class="modal-dialog" role="document">
                                                                            <div class="modal-content">
                                                                                <form class="form-stage"
                                                                                    data-name="Renovation Team"
                                                                                    data-api_url="{% url 'property-api:renovation-team-expenses-create' %}"
                                                                                    data-name="Renovation Team Expense"
                                                                                    data-reload="true">
                                                                                    <div class="modal-header">
                                                                                        <h5 class="modal-title"
                                                                                            id="create-renovation-team-expense-{{forloop.counter}}">
                                                                                            Add Renovation Team Expense
                                                                                        </h5>
                                                                                        <button type="button"
                                                                                            class="close"
                                                                                            data-dismiss="modal"
                                                                                            aria-label="Cancel">
                                                                                            <span
                                                                                                aria-hidden="true">&times;</span>
                                                                                        </button>
                                                                                    </div>
                                                                                    <div class="modal-body">
                                                                                        <div class="form-group">
                                                                                            <input type="text"
                                                                                                value="{{expense_table.id}}"
                                                                                                style="display: none;"
                                                                                                name="expense_table_id">
                                                                                            <label
                                                                                                for="title">Title</label>
                                                                                            <input type="text"
                                                                                                class="form-control"
                                                                                                value="" id="title"
                                                                                                name="title"
                                                                                                placeholder="Enter Title"
                                                                                                autocomplete="off">
                                                                                        </div>
                                                                                        <div class="form-group">
                                                                                            <label
                                                                                                for="description">Description</label>
                                                                                            <input type="text"
                                                                                                class="form-control"
                                                                                                value=""
                                                                                                id="description"
                                                                                                name="description"
                                                                                                placeholder="Enter Description"
                                                                                                autocomplete="off">
                                                                                        </div>
                                                                                        <div class="form-group">
                                                                                            <label
                                                                                                for="amount">Amount</label>
                                                                                            <input type="number"
                                                                                                class="form-control"
                                                                                                value="" step="0.1"
                                                                                                id="amount"
                                                                                                name="amount"
                                                                                                placeholder="Enter Amount"
                                                                                                autocomplete="off">
                                                                                        </div>
                                                                                        <div class="form-group">
                                                                                            <label
                                                                                                for="currency">Currency</label>
                                                                                            <input type="text"
                                                                                                class="form-control"
                                                                                                value="" step="0.1"
                                                                                                id="currency"
                                                                                                name="currency"
                                                                                                placeholder="Enter Currency"
                                                                                                autocomplete="off">
                                                                                        </div>
                                                                                        <div class="form-group">
                                                                                            <label
                                                                                                for="account">Account</label>
                                                                                            <input type="text"
                                                                                                class="form-control"
                                                                                                value="" id="account"
                                                                                                name="account"
                                                                                                placeholder="Enter Account"
                                                                                                autocomplete="off">
                                                                                        </div>
                                                                                        <div class="form-group">
                                                                                            <label
                                                                                                for="date">Date</label>
                                                                                            <input type="date"
                                                                                                class="form-control"
                                                                                                value="" id="date"
                                                                                                name="date"
                                                                                                placeholder="Enter Date"
                                                                                                autocomplete="off">
                                                                                        </div>
                                                                                        <div class="form-group">
                                                                                            <label
                                                                                                for="store">Store</label>
                                                                                            <input type="text"
                                                                                                class="form-control"
                                                                                                value="" id="store"
                                                                                                name="store"
                                                                                                placeholder="Enter Name of Store"
                                                                                                autocomplete="off">
                                                                                        </div>
                                                                                        <div class="form-group">
                                                                                            <label
                                                                                                for="order_date">Order
                                                                                                date</label>
                                                                                            <input type="date"
                                                                                                class="form-control"
                                                                                                value="" id="order_date"
                                                                                                name="order_date"
                                                                                                placeholder="Enter Order date"
                                                                                                autocomplete="off">
                                                                                        </div>
                                                                                        <div class="form-group">
                                                                                            <label
                                                                                                for="delivery_date">Delivery
                                                                                                date</label>
                                                                                            <input type="date"
                                                                                                class="form-control"
                                                                                                value=""
                                                                                                id="delivery_date"
                                                                                                name="delivery_date"
                                                                                                placeholder="Enter Delivery date"
                                                                                                autocomplete="off">
                                                                                        </div>
                                                                                        <div class="form-group">
                                                                                            <label for="company">Company
                                                                                                Name</label>
                                                                                            <input type="text"
                                                                                                class="form-control"
                                                                                                value="" id="company"
                                                                                                name="company"
                                                                                                placeholder="Enter Name of Company"
                                                                                                autocomplete="off">
                                                                                        </div>

                                                                                    </div>
                                                                                    <div class="modal-footer">
                                                                                        <button type="button"
                                                                                            class="btn btn-secondary"
                                                                                            data-dismiss="modal">Cancel</button>
                                                                                        <button type="button"
                                                                                            class="btn btn-primary modal-submit-button"
                                                                                            data-dismiss="modal">Create</button>
                                                                                    </div>
                                                                                </form>
                                                                            </div>
                                                                        </div>
                                                                    </div>

                                                                    <div id="collapse{{forloop.counter}}"
                                                                        role="tabpanel"
                                                                        aria-labelledby="expenseTableCollapse{{forloop.counter}}"
                                                                        class="collapse">
                                                                        <div class="card-content">
                                                                            <div class="card-body">
                                                                                <!-- Scroll - horizontal and vertical table -->
                                                                                <section id="horizontal-vertical">
                                                                                    <div class="row">
                                                                                        <div class="col-12">
                                                                                            <div class="card">
                                                                                                <div
                                                                                                    class="card-content">
                                                                                                    <div
                                                                                                        class="card-body card-dashboard">
                                                                                                        <table
                                                                                                            class="table table-hover text-center table-responsive"
                                                                                                            id="expense-table-{{forloop.counter}}"
                                                                                                            data-expense-table-id="{{expense_table.id}}"
                                                                                                            style="width: 100%;">
                                                                                                            <thead>
                                                                                                                <tr>
                                                                                                                    <th
                                                                                                                        class="text-center">
                                                                                                                        Title
                                                                                                                    </th>
                                                                                                                    <th
                                                                                                                        class="text-center">
                                                                                                                        Description
                                                                                                                    </th>
                                                                                                                    <th
                                                                                                                        class="text-center">
                                                                                                                        Amount
                                                                                                                    </th>
                                                                                                                    <th
                                                                                                                        class="text-center">
                                                                                                                        Currency
                                                                                                                    </th>
                                                                                                                    <th
                                                                                                                        class="text-center">
                                                                                                                        Account
                                                                                                                    </th>
                                                                                                                    <th
                                                                                                                        class="text-center">
                                                                                                                        Date
                                                                                                                    </th>
                                                                                                                    <th
                                                                                                                        class="text-center">
                                                                                                                        Store
                                                                                                                    </th>
                                                                                                                    <th
                                                                                                                        class="text-center">
                                                                                                                        Order
                                                                                                                        Date
                                                                                                                    </th>
                                                                                                                    <th
                                                                                                                        class="text-center">
                                                                                                                        Delivery
                                                                                                                        Date
                                                                                                                    </th>
                                                                                                                    <th
                                                                                                                        class="text-center">
                                                                                                                        Company
                                                                                                                    </th>
                                                                                                                </tr>
                                                                                                            </thead>
                                                                                                            <tbody
                                                                                                                class="text-center">
                                                                                                            </tbody>
                                                                                                        </table>
                                                                                                    </div>
                                                                                                </div>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                </section>
                                                                                <!--/ Scroll - horizontal and vertical table -->
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                {% endfor %}


                                                                <div class="card collapse-header d-none">
                                                                    <div id="headingCollapse2" class="card-header"
                                                                        data-toggle="collapse" role="button"
                                                                        data-target="#collapse2" aria-expanded="false"
                                                                        aria-controls="collapse2">
                                                                        <span class="collapse-title">
                                                                            Table of Expense 1
                                                                            <div class="float-right">
                                                                                <button
                                                                                    class="btn btn-icon btn-warning edit-button">Edit</button>

                                                                                <button
                                                                                    class="ml-1 btn btn-icon btn-danger delete-button float-right"
                                                                                    data-toggle="modal"
                                                                                    data-target="#delete-1">Delete</button>
                                                                            </div>
                                                                        </span>
                                                                    </div>



                                                                    <div id="collapse2" role="tabpanel"
                                                                        aria-labelledby="headingCollapse2"
                                                                        class="collapse">
                                                                        <div class="card-content">
                                                                            <div class="card-body">

                                                                                <!-- table Marketing campaigns start -->
                                                                                <section id="table-Marketing">
                                                                                    <div class="card">


                                                                                        <div class="table-responsive">
                                                                                            <!-- table start -->
                                                                                            <table
                                                                                                id="table-marketing-campaigns"
                                                                                                class="table mb-0">
                                                                                                <thead>
                                                                                                    <tr>
                                                                                                        <th>Title</th>
                                                                                                        <th>Description
                                                                                                        </th>
                                                                                                        <th>Amount +/-
                                                                                                        </th>
                                                                                                        <th>Currency
                                                                                                        </th>
                                                                                                        <th>Wallet
                                                                                                            Account</th>
                                                                                                        <th>Date</th>

                                                                                                    </tr>
                                                                                                </thead>
                                                                                                <tbody>

                                                                                                    <tr>
                                                                                                        <td>Title of
                                                                                                            Payment</td>
                                                                                                        <td>Some
                                                                                                            description
                                                                                                            here about
                                                                                                            the payment
                                                                                                        </td>
                                                                                                        <td>500</td>
                                                                                                        <td>EUR</td>
                                                                                                        <td>Wallet
                                                                                                            Account
                                                                                                            title here
                                                                                                        </td>
                                                                                                        <td>Date Field
                                                                                                        </td>

                                                                                                    </tr>
                                                                                                    <tr>
                                                                                                        <td>Title of
                                                                                                            Payment</td>
                                                                                                        <td>Some
                                                                                                            description
                                                                                                            here about
                                                                                                            the payment
                                                                                                        </td>
                                                                                                        <td>500</td>
                                                                                                        <td>EUR</td>
                                                                                                        <td>Wallet
                                                                                                            Account
                                                                                                            title here
                                                                                                        </td>
                                                                                                        <td>Date Field
                                                                                                        </td>

                                                                                                    </tr>
                                                                                                    <tr>
                                                                                                        <td>Title of
                                                                                                            Payment</td>
                                                                                                        <td>Some
                                                                                                            description
                                                                                                            here about
                                                                                                            the payment
                                                                                                        </td>
                                                                                                        <td>500</td>
                                                                                                        <td>EUR</td>
                                                                                                        <td>Wallet
                                                                                                            Account
                                                                                                            title here
                                                                                                        </td>
                                                                                                        <td>Date Field
                                                                                                        </td>

                                                                                                    </tr>
                                                                                                    <tr>
                                                                                                        <td>Title of
                                                                                                            Payment</td>
                                                                                                        <td>Some
                                                                                                            description
                                                                                                            here about
                                                                                                            the payment
                                                                                                        </td>
                                                                                                        <td>500</td>
                                                                                                        <td>EUR</td>
                                                                                                        <td>Wallet
                                                                                                            Account
                                                                                                            title here
                                                                                                        </td>
                                                                                                        <td>Date Field
                                                                                                        </td>

                                                                                                    </tr>
                                                                                                    <tr>
                                                                                                        <td>Title of
                                                                                                            Payment</td>
                                                                                                        <td>Some
                                                                                                            description
                                                                                                            here about
                                                                                                            the payment
                                                                                                        </td>
                                                                                                        <td>500</td>
                                                                                                        <td>EUR</td>
                                                                                                        <td>Wallet
                                                                                                            Account
                                                                                                            title here
                                                                                                        </td>
                                                                                                        <td>Date Field
                                                                                                        </td>

                                                                                                    </tr>
                                                                                                    <tr>
                                                                                                        <td>Title of
                                                                                                            Payment</td>
                                                                                                        <td>Some
                                                                                                            description
                                                                                                            here about
                                                                                                            the payment
                                                                                                        </td>
                                                                                                        <td>500</td>
                                                                                                        <td>EUR</td>
                                                                                                        <td>Wallet
                                                                                                            Account
                                                                                                            title here
                                                                                                        </td>
                                                                                                        <td>Date Field
                                                                                                        </td>

                                                                                                    </tr>
                                                                                                    <tr>
                                                                                                        <td>Title of
                                                                                                            Payment</td>
                                                                                                        <td>Some
                                                                                                            description
                                                                                                            here about
                                                                                                            the payment
                                                                                                        </td>
                                                                                                        <td>500</td>
                                                                                                        <td>EUR</td>
                                                                                                        <td>Wallet
                                                                                                            Account
                                                                                                            title here
                                                                                                        </td>
                                                                                                        <td>Date Field
                                                                                                        </td>

                                                                                                    </tr>
                                                                                                </tbody>
                                                                                            </table>
                                                                                            <!-- table ends -->
                                                                                        </div>
                                                                                    </div>
                                                                                </section>
                                                                                <!-- table Marketing campaigns ends -->

                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>

                                                            </div>

                                                        </section>
                                                        <!-- Collapse end -->
                                                    </div>
                                                </div>

                                            </div>
                                            <div class="tab-pane" id="rent-stage" aria-labelledby="rent-stage-tab"
                                                role="tabpanel">
                                                <form class="form-stage"
                                                    data-api_url="{% url 'property-api:stage-rent' %}"
                                                    data-name="Rent Stage" data-reload="true">
                                                    <fieldset class="pt-0">
                                                        <h5 class="py-50">Enter your Rent Details</h5>
                                                        <div class="row">
                                                            <div class="col-12">
                                                                <div class="form-group">
                                                                    <label for="property-expected-rent">Expected
                                                                        Rent</label>
                                                                    <div class="input-group mb-0">
                                                                        <div class="input-group-prepend">
                                                                            <span class="input-group-text"
                                                                                id="basic-addon1">$</span>
                                                                        </div>
                                                                        <input type="number" step="1" min="0"
                                                                            class="form-control"
                                                                            id="property-expected-rent"
                                                                            value="{{stage_rent.expected_rent}}"
                                                                            name="property-expected-rent"
                                                                            placeholder="Enter Your Rent"
                                                                            aria-label="Rent"
                                                                            aria-describedby="basic-addon1">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </fieldset>
                                                    <span
                                                        class="float-sm-right d-flex flex-sm-row flex-column justify-content-end mt-2">
                                                        <button type="submit" class="btn btn-primary">Post
                                                            Stage</button>
                                                    </span>
                                                </form>
                                            </div>

                                            <div class="tab-pane" id="tenant-stage" aria-labelledby="tenant-stage-tab"
                                                role="tabpanel">
                                                <form class="form-stage"
                                                    data-api_url="{% url 'property-api:stage-tenant' %}"
                                                    data-name="Tenant Stage" data-reload="true">
                                                    <fieldset class="pt-0">
                                                        <h5 class="py-50">Enter your Tenant Details</h5>
                                                        <div class="row">
                                                            <div class="col-12">
                                                                <div class="form-group">
                                                                    <label for="property-actual-rent">Actual
                                                                        Rent</label>
                                                                    <div class="input-group mb-0">
                                                                        <div class="input-group-prepend">
                                                                            <span class="input-group-text"
                                                                                id="basic-addon1">$</span>
                                                                        </div>
                                                                        <input type="number" step="1" min="0"
                                                                            class="form-control"
                                                                            id="property-actual-rent"
                                                                            value="{{stage_tenant.actual_rent}}"
                                                                            name="property-actual-rent"
                                                                            placeholder="Enter Your Actual Rent"
                                                                            aria-label="Actual Rent"
                                                                            aria-describedby="basic-addon1">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-12">
                                                                <div class="form-group">
                                                                    <label
                                                                        for="property-tenant-description">Description</label>
                                                                    <textarea type="text" rows="3" class="form-control"
                                                                        id="property-tenant-description"
                                                                        value="{{stage_tenant.description}}"
                                                                        name="property-tenant-description"
                                                                        placeholder="Enter Your Description"></textarea>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </fieldset>
                                                    <span
                                                        class="float-sm-right d-flex flex-sm-row flex-column justify-content-end mt-2">
                                                        <button type="submit" class="btn btn-primary">Post
                                                            Stage</button>
                                                    </span>
                                                </form>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </section>

                        <div class="card">
                            <div class="card-content">
                                <form class="form-stage" data-api_url="{% url 'property-api:stage-opportunity' %}"
                                    data-name="Opportunity Stage">
                                    <div class="card-header user-profile-header">
                                        <div class="d-inline-block mt-25">
                                            <h6 class="mb-0 text-bold-500">General Information</h6>
                                        </div>
                                        <div class="float-right">
                                            <button class="btn btn-warning edit-button">Edit</button>
                                            <button class="btn btn-success save-button"
                                                style="display: none;">Save</button>
                                            <button class="ml-1 btn btn-danger delete-button float-right"
                                                data-toggle="modal" data-target="#delete-1">Delete</button>
                                        </div>
                                    </div>
                                    <div class="card-body py-0">
                                        <div class="modal fade" id="delete-1" tabindex="-1" role="dialog"
                                            aria-labelledby="delete-1Label" aria-hidden="true">
                                            <div class="modal-dialog" role="document">
                                                <div class="modal-content">
                                                    <div class="modal-header">
                                                        <h5 class="modal-title" id="delete-1Label">Are you sure? You are
                                                            deleting Opprtunity Stage</h5>
                                                        <button type="button" class="close" data-dismiss="modal"
                                                            aria-label="Close">
                                                            <span aria-hidden="true">&times;</span>
                                                        </button>
                                                    </div>
                                                    <div class="modal-body">
                                                        Plese remember that all deleted informtion will be permanently
                                                        lost!
                                                    </div>
                                                    <div class="modal-footer">
                                                        <button type="button" class="btn btn-danger"
                                                            data-dismiss="modal">No</button>
                                                        <button type="button"
                                                            class="btn btn-success delete-confirm-button"
                                                            data-dismiss="modal">Yes</button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <fieldset class="pt-0">
                                            <div class="row">
                                                <div class="col-12 col-sm-6 col-md-4">
                                                    <div class="form-group">
                                                        <label for="property-city">City</label>
                                                        <input disabled type="text" class="form-control"
                                                            id="property-city" name="property-city"
                                                            value="{% if stage_opportunity.city %}{{stage_opportunity.city}}{% endif %}"
                                                            placeholder="Enter Your City">
                                                    </div>
                                                </div>
                                                <div class="col-sm-12 col-md-8">
                                                    <div class="form-group">
                                                        <label for="property-address">Address </label>
                                                        <input disabled type="text" class="form-control"
                                                            id="property-address" name="property-address"
                                                            value="{% if stage_opportunity.address %}{{stage_opportunity.address}}{% endif %}"
                                                            placeholder="Enter Your Address">
                                                    </div>
                                                </div>

                                                <div class="col-12 col-sm-6 col-md-4">
                                                    <div class="form-group">
                                                        <label for="property-zipcode">Zip Code</label>
                                                        <input disabled type="text" class="form-control"
                                                            id="property-zipcode" name="property-zipcode"
                                                            value="{% if stage_opportunity.zipcode %}{{stage_opportunity.zipcode}}{% endif %}"
                                                            placeholder="Enter Your Zip Code">
                                                    </div>
                                                </div>
                                                <div class="col-sm-12 col-md-8">
                                                    <div class="form-group">
                                                        <label for="property-residence-complex">Residence
                                                            Complex</label>
                                                        <input disabled type="text" class="form-control"
                                                            id="property-residence-complex"
                                                            name="property-residence-complex"
                                                            value="{% if stage_opportunity.residence_complex %}{{stage_opportunity.residence_complex}}{% endif %}"
                                                            placeholder="Enter Your Residence Complex">
                                                    </div>
                                                </div>
                                                <div class="col-sm-12">
                                                    <div class="divider divider-primary">
                                                        <div class="divider-text">Property Details</div>
                                                    </div>
                                                </div>
                                                <div class="col-12 col-sm-6 col-md-4">
                                                    <div class="form-group">
                                                        <label for="property-no-of-rooms">Number of Rooms</label>
                                                        <input disabled type="number" step="1" min="0"
                                                            class="form-control" id="property-no-of-rooms"
                                                            name="property-no-of-rooms"
                                                            value="{% if stage_opportunity.number_of_rooms %}{{stage_opportunity.number_of_rooms}}{% endif %}"
                                                            placeholder="Enter Your Number of Rooms">
                                                    </div>
                                                </div>
                                                <div class="col-12 col-sm-6 col-md-4">
                                                    <div class="form-group">
                                                        <label for="property-no-of-beds">Bedrooms</label>
                                                        <input disabled type="number" step="1" min="0"
                                                            class="form-control" id="property-no-of-beds"
                                                            name="property-no-of-beds"
                                                            value="{% if stage_opportunity.bedrooms %}{{stage_opportunity.bedrooms}}{% endif %}"
                                                            placeholder="Enter Your Bedrooms">
                                                    </div>
                                                </div>
                                                <div class="col-12 col-sm-6 col-md-4">
                                                    <div class="form-group">
                                                        <label for="property-no-of-bathrooms">Bathrooms</label>
                                                        <input disabled type="number" step="1" min="0"
                                                            class="form-control" id="property-no-of-bathrooms"
                                                            name="property-no-of-bathrooms"
                                                            value="{% if stage_opportunity.bathrooms %}{{stage_opportunity.bathrooms}}{% endif %}"
                                                            placeholder="Enter Your Bathrooms">
                                                    </div>
                                                </div>
                                                <div class="col-12 col-sm-6 col-md-4">
                                                    <div class="form-group">
                                                        <label for="property-no-of-kitchen">Kitchen</label>
                                                        <input disabled type="number" step="1" min="0"
                                                            class="form-control" id="property-no-of-kitchen"
                                                            name="property-no-of-kitchen"
                                                            value="{% if stage_opportunity.kitchen %}{{stage_opportunity.kitchen}}{% endif %}"
                                                            placeholder="Enter Your Kitchen">
                                                    </div>
                                                </div>
                                                <div class="col-12 col-sm-6 col-md-4">
                                                    <div class="form-group">
                                                        <label for="property-usable-sqm">Usable Sqm</label>
                                                        <input disabled type="number" step="0.01" min="0"
                                                            class="form-control" id="property-usable-sqm"
                                                            name="property-usable-sqm"
                                                            value="{% if stage_opportunity.usable_sqm %}{{stage_opportunity.usable_sqm}}{% endif %}"
                                                            placeholder="Enter Your Usable Sqm">
                                                    </div>
                                                </div>
                                                <div class="col-12 col-sm-6 col-md-4">
                                                    <div class="form-group">
                                                        <label for="property-build-sqm">Build Sqm</label>
                                                        <input disabled type="number" step="0.01" min="0"
                                                            class="form-control" id="property-build-sqm"
                                                            name="property-build-sqm"
                                                            value="{% if stage_opportunity.build_sqm %}{{stage_opportunity.build_sqm}}{% endif %}"
                                                            placeholder="Enter Your Build Sqm">
                                                    </div>
                                                </div>
                                                <div class="col-12 col-sm-6 col-md-4">
                                                    <div class="form-group">
                                                        <label for="property-floor">Floor</label>
                                                        <input disabled type="text" class="form-control"
                                                            id="property-floor" name="property-floor"
                                                            value="{% if stage_opportunity.floor %}{{stage_opportunity.floor}}{% endif %}"
                                                            placeholder="Enter Your Floor">
                                                    </div>
                                                </div>
                                                <div class="col-12 col-sm-6 col-md-4">
                                                    <div class="form-group">
                                                        <label for="property-destination">Destination</label>

                                                        <input disabled type="text" class="form-control"
                                                            id="property-destination" name="property-destination"
                                                            value="{% if stage_opportunity.destination %}{{stage_opportunity.destination}}{% endif %}"
                                                            placeholder="Enter Your Destination">

                                                    </div>
                                                </div>
                                                <div class="col-12 col-sm-6 col-md-4">
                                                    <div class="form-group">
                                                        <label for="property-layout">Layout</label>
                                                        <input disabled type="text" class="form-control"
                                                            id="property-layout" name="property-layout"
                                                            value="{% if stage_opportunity.layout %}{{stage_opportunity.layout}}{% endif %}"
                                                            placeholder="Enter Your Layout">
                                                    </div>
                                                </div>
                                                <div class="col-12 col-sm-6 col-md-4">
                                                    <div class="form-group">
                                                        <label for="property-comfort-type">Comfort Type</label>
                                                        <input disabled type="text" class="form-control"
                                                            id="property-comfort-type" name="property-comfort-type"
                                                            value="{% if stage_opportunity.comfort_type %}{{stage_opportunity.comfort_type}}{% endif %}"
                                                            placeholder="Enter Your Comfort Type">
                                                    </div>
                                                </div>
                                                <div class="col-12 col-sm-6 col-md-4">
                                                    <div class="form-group">
                                                        <label for="property-interior-state">Interior State</label>
                                                        <input disabled type="text" class="form-control"
                                                            id="property-interior-state" name="property-interior-state"
                                                            value="{% if stage_opportunity.interior_state %}{{stage_opportunity.interior_state}}{% endif %}"
                                                            placeholder="Enter Your Interior State">
                                                    </div>
                                                </div>
                                                <div class="col-sm-12">
                                                    <div class="divider divider-primary">
                                                        <div class="divider-text">Ownership Details</div>
                                                    </div>
                                                </div>
                                                <div class="col-12 col-sm-6 col-md-4">
                                                    <div class="form-group">
                                                        <label for="property-owner">Owner</label>
                                                        <input disabled type="text" class="form-control"
                                                            id="property-owner" name="property-owner"
                                                            value="{% if stage_opportunity.owner %}{{stage_opportunity.owner}}{% endif %}"
                                                            placeholder="Enter Your Owner">
                                                    </div>
                                                </div>
                                                <div class="col-12 col-sm-6 col-md-4">
                                                    <div class="form-group">
                                                        <label for="property-asking-price">Asking price</label>
                                                        <input disabled type="text" class="form-control"
                                                            id="property-asking-price" name="property-asking-price"
                                                            value="{% if stage_opportunity.asking_price %}{{stage_opportunity.asking_price}}{% endif %}"
                                                            placeholder="Enter Your Asking price">
                                                    </div>
                                                </div>

                                                <div class="col-12 col-sm-6 col-md-4">
                                                    <div class="form-group">
                                                        <label for="property-building">Building</label>
                                                        <input disabled type="text" class="form-control"
                                                            id="property-building" name="property-building"
                                                            value="{% if stage_opportunity.building %}{{stage_opportunity.building}}{% endif %}"
                                                            placeholder="Enter Your Building">
                                                    </div>
                                                </div>
                                                <div class="col-12 col-sm-6 col-md-4">
                                                    <div class="form-group">
                                                        <label for="property-entrance">Entrance</label>
                                                        <input disabled type="text" class="form-control"
                                                            id="property-entrance" name="property-entrance"
                                                            value="{% if stage_opportunity.entrance %}{{stage_opportunity.entrance}}{% endif %}"
                                                            placeholder="Enter Your Entrance">
                                                    </div>
                                                </div>

                                                <div class="col-12 col-sm-6 col-md-4">
                                                    <div class="form-group">
                                                        <label for="property-apartment-number">Apartment
                                                            Number</label>
                                                        <input disabled type="text" class="form-control"
                                                            id="property-apartment-number"
                                                            name="property-apartment-number"
                                                            value="{% if stage_opportunity.apartament_number %}{{stage_opportunity.apartament_number}}{% endif %}"
                                                            placeholder="Enter Your Apartment Number">
                                                    </div>
                                                </div>
                                                <div class="col-12 col-sm-6 col-md-4">
                                                    <div class="form-group">
                                                        <label for="property-reper">Reper</label>
                                                        <input disabled type="text" class="form-control"
                                                            id="property-reper" name="property-reper"
                                                            value="{% if stage_opportunity.reper %}{{stage_opportunity.reper}}{% endif %}"
                                                            placeholder="Enter Your Reper">
                                                    </div>
                                                </div>
                                                <div class="col-12 col-sm-6 col-md-4">
                                                    <div class="form-group">
                                                        <label for="property-vecinatati">Vecinatati</label>
                                                        <input disabled type="text" class="form-control"
                                                            id="property-vecinatati" name="property-vecinatati"
                                                            value="{% if stage_opportunity.vecinatati %}{{stage_opportunity.vecinatati}}{% endif %}"
                                                            placeholder="Enter Your Vecinatati">
                                                    </div>
                                                </div>





                                                <div class="col-12 col-sm-6 col-md-4">
                                                    <div class="form-group">
                                                        <label for="property-building-type">Building Type</label>
                                                        <input disabled type="text" class="form-control"
                                                            id="property-building-type" name="property-building-type"
                                                            value="{% if stage_opportunity.building_type %}{{stage_opportunity.building_type}}{% endif %}"
                                                            placeholder="Enter Your Building Type">
                                                    </div>
                                                </div>
                                                <div class="col-12 col-sm-6 col-md-4">
                                                    <div class="form-group">
                                                        <label for="property-building-construction-date">Building
                                                            Construction Date</label>
                                                        <input disabled type="date" class="form-control"
                                                            id="property-building-construction-date"
                                                            name="property-building-construction-date"
                                                            value="{% if stage_opportunity.get_building_construction_date %}{{stage_opportunity.get_building_construction_date}}{% endif %}"
                                                            placeholder="Enter Your Building Construction Date">
                                                    </div>
                                                </div>
                                                <div class="col-12 col-sm-6 col-md-4">
                                                    <div class="form-group">
                                                        <label
                                                            for="property-opportunity-description">Description</label>
                                                        <input disabled type="text" class="form-control"
                                                            id="property-opportunity-description"
                                                            name="property-opportunity-description"
                                                            value="{% if stage_opportunity.description %}{{stage_opportunity.description}}{% endif %}"
                                                            placeholder="Enter Your Description">
                                                    </div>
                                                </div>
                                                <div class="col-12 col-sm-6 col-md-4">
                                                    <div class="form-group">
                                                        <label for="property-potential-rent">Potential Rent</label>
                                                        <div class="input-group mb-0">
                                                            <div class="input-group-prepend">
                                                                <span class="input-group-text"
                                                                    id="basic-addon1">$</span>
                                                            </div>
                                                            <input disabled type="number" step="0.01" min="0"
                                                                class="form-control" id="property-potential-rent"
                                                                name="property-potential-rent"
                                                                placeholder="Enter Your Potential Rent"
                                                                aria-label="Potential Rent"
                                                                aria-describedby="basic-addon1"
                                                                value="{% if stage_opportunity.potential_rent %}{{stage_opportunity.potential_rent}}{% endif %}">
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="row">
                                                <div class="col-12">
                                                    <div class="form-group">
                                                        <label class="mr-2">Others:</label>
                                                        <div class="c-inputs-stacked">
                                                            <div class="d-inline-block mr-2">
                                                                <fieldset>
                                                                    <div class="checkbox pb-1">
                                                                        <input disabled type="checkbox"
                                                                            class="checkbox__input" id="balcony-card"
                                                                            name="property-balcony-card"
                                                                            {% if stage_opportunity.balcony %} checked
                                                                            {% endif %}>
                                                                        <label for="balcony-card">Balcony</label>
                                                                    </div>
                                                                </fieldset>
                                                            </div>
                                                            <div class="d-inline-block mr-2">
                                                                <fieldset>
                                                                    <div class="checkbox pb-1">
                                                                        <input disabled type="checkbox"
                                                                            class="checkbox__input" id="garage-card"
                                                                            name="property-garage-card"
                                                                            {% if stage_opportunity.garage %} checked
                                                                            {% endif %}>
                                                                        <label for="garage-card">Garage</label>
                                                                    </div>
                                                                </fieldset>
                                                            </div>
                                                            <div class="d-inline-block mr-2">
                                                                <fieldset>
                                                                    <div class="checkbox pb-1">
                                                                        <input disabled type="checkbox"
                                                                            class="checkbox__input" id="basement-card"
                                                                            name="property-basement-card"
                                                                            {% if stage_opportunity.basement %} checked
                                                                            {% endif %}>
                                                                        <label for="basement-card">Basement</label>
                                                                    </div>
                                                                </fieldset>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </fieldset>
                                    </div>
                                </form>
                            </div>
                        </div>

                        {% if stage_buying %}
                        <div class="card">
                            <div class="card-content">
                                <form class="form-stage" data-api_url="{% url 'property-api:stage-buying' %}"
                                    data-name="Buying Stage">
                                    <div class="card-header user-profile-header">
                                        <div class="d-inline-block mt-25">
                                            <h6 class="mb-0 text-bold-500">Buying Stage</h6>
                                        </div>
                                        <div class="float-right">
                                            <button class="btn btn-warning edit-button">Edit</button>
                                            <button class="btn btn-success save-button"
                                                style="display: none;">Save</button>

                                            <button class="ml-1 btn btn-danger delete-button float-right"
                                                data-toggle="modal" data-target="#delete-2">Delete</button>
                                        </div>
                                    </div>
                                    <div class="card-body py-0">
                                        <div class="modal fade" id="delete-2" tabindex="-1" role="dialog"
                                            aria-labelledby="delete-2Label" aria-hidden="true">
                                            <div class="modal-dialog" role="document">
                                                <div class="modal-content">
                                                    <div class="modal-header">
                                                        <h5 class="modal-title" id="delete-2Label">Are you sure? You are
                                                            deleting Buying Stage</h5>
                                                        <button type="button" class="close" data-dismiss="modal"
                                                            aria-label="Close">
                                                            <span aria-hidden="true">&times;</span>
                                                        </button>
                                                    </div>
                                                    <div class="modal-body">
                                                        ...
                                                    </div>
                                                    <div class="modal-footer">
                                                        <button type="button" class="btn btn-danger"
                                                            data-dismiss="modal">No</button>
                                                        <button type="button"
                                                            class="btn btn-success delete-confirm-button"
                                                            data-dismiss="modal">Yes</button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <fieldset class="pt-0">
                                            <h5 class="py-50">Setup Your Buying Stage Details</h5>
                                            <div class="row">
                                                <div class="col-12 col-sm-6 col-md-4">
                                                    <div class="form-group">
                                                        <label for="property-agent-costs">Agent Costs</label>
                                                        <div class="input-group mb-0">
                                                            <div class="input-group-prepend">
                                                                <span class="input-group-text"
                                                                    id="basic-addon1">$</span>
                                                            </div>
                                                            <input disabled type="number" step="0.01" min="0"
                                                                class="form-control" id="property-agent-costs"
                                                                value="{{stage_buying.agent_costs}}"
                                                                name="property-agent-costs"
                                                                placeholder="Enter Your Agent Costs"
                                                                aria-label="Potential Rent"
                                                                aria-describedby="basic-addon1">
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-12 col-sm-6 col-md-4">
                                                    <div class="form-group">
                                                        <label for="property-notary-costs">Notary Costs</label>
                                                        <div class="input-group mb-0">
                                                            <div class="input-group-prepend">
                                                                <span class="input-group-text"
                                                                    id="basic-addon1">$</span>
                                                            </div>
                                                            <input disabled type="number" step="0.01" min="0"
                                                                class="form-control" id="property-notary-costs"
                                                                value="{{stage_buying.notary_costs}}"
                                                                name="property-notary-costs"
                                                                placeholder="Enter Your Notary Costs"
                                                                aria-label="Potential Rent"
                                                                aria-describedby="basic-addon1">
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-12 col-sm-6 col-md-4">
                                                    <div class="form-group">
                                                        <label for="property-legal-costs">Legal Costs</label>
                                                        <div class="input-group mb-0">
                                                            <div class="input-group-prepend">
                                                                <span class="input-group-text"
                                                                    id="basic-addon1">$</span>
                                                            </div>
                                                            <input disabled type="number" step="0.01" min="0"
                                                                class="form-control" id="property-legal-costs"
                                                                value="{{stage_buying.legal_costs}}"
                                                                name="property-legal-costs"
                                                                placeholder="Enter Your Legal Costs"
                                                                aria-label="Potential Rent"
                                                                aria-describedby="basic-addon1">
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-12 col-sm-6 col-md-4">
                                                    <div class="form-group">
                                                        <label for="property-accountant-costs">Accountant
                                                            Costs</label>
                                                        <div class="input-group mb-0">
                                                            <div class="input-group-prepend">
                                                                <span class="input-group-text"
                                                                    id="basic-addon1">$</span>
                                                            </div>
                                                            <input disabled type="number" step="0.01" min="0"
                                                                class="form-control" id="property-accountant-costs"
                                                                value="{{stage_buying.accountant_costs}}"
                                                                name="property-accountant-costs"
                                                                placeholder="Enter Your Accountant Costs"
                                                                aria-label="Accountant Costs"
                                                                aria-describedby="basic-addon1">
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-12 col-sm-6 col-md-4">
                                                    <div class="form-group">
                                                        <label for="property-other-costs">Other Costs</label>
                                                        <div class="input-group mb-0">
                                                            <div class="input-group-prepend">
                                                                <span class="input-group-text"
                                                                    id="basic-addon1">$</span>
                                                            </div>
                                                            <input disabled type="number" step="0.01" min="0"
                                                                class="form-control" id="property-other-costs"
                                                                value="{{stage_buying.other_costs}}"
                                                                name="property-other-costs"
                                                                placeholder="Enter Your Other Costs"
                                                                aria-label="Other Costs"
                                                                aria-describedby="basic-addon1">
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-12 col-sm-6 col-md-4">
                                                    <div class="form-group">
                                                        <label for="property-buy-price">Buy Price</label>
                                                        <div class="input-group mb-0">
                                                            <div class="input-group-prepend">
                                                                <span class="input-group-text"
                                                                    id="basic-addon1">$</span>
                                                            </div>
                                                            <input disabled type="number" step="0.01" min="0"
                                                                class="form-control" id="property-buy-price"
                                                                name="property-buy-price"
                                                                value="{{stage_buying.buy_price}}"
                                                                placeholder="Enter Your Buy Price"
                                                                aria-label="Buy Price" aria-describedby="basic-addon1">
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-sm-12">
                                                    <div class="form-group">
                                                        <label for="property-buying-description">Description</label>
                                                        <textarea disabled type="text" rows="3" class="form-control"
                                                            id="property-buying-description"
                                                            name="property-buying-description"
                                                            placeholder="Enter Your Description">{{stage_buying.description}}</textarea>
                                                    </div>
                                                </div>
                                            </div>
                                        </fieldset>
                                    </div>
                                </form>
                            </div>
                        </div>
                        {% endif %}

                        {% if stage_rent %}
                        <div class="card">
                            <div class="card-content">
                                <form class="form-stage" data-api_url="{% url 'property-api:stage-rent' %}"
                                    data-name="Rent Stage">
                                    <div class="card-header user-profile-header">
                                        <div class="d-inline-block mt-25">
                                            <h6 class="mb-0 text-bold-500">Rent Stage</h6>
                                        </div>
                                        <div class="float-right">
                                            <button class="btn btn-warning edit-button">Edit</button>
                                            <button class="btn btn-success save-button"
                                                style="display: none;">Save</button>
                                            <button class="ml-1 btn btn-danger delete-button float-right"
                                                data-toggle="modal" data-target="#delete-3">Delete</button>
                                        </div>

                                    </div>
                                    <div class="card-body py-0">
                                        <div class="modal fade" id="delete-3" tabindex="-1" role="dialog"
                                            aria-labelledby="delete-3Label" aria-hidden="true">
                                            <div class="modal-dialog" role="document">
                                                <div class="modal-content">
                                                    <div class="modal-header">
                                                        <h5 class="modal-title" id="delete-3Label">Are you sure? You are
                                                            deleting Rent Stage</h5>
                                                        <button type="button" class="close" data-dismiss="modal"
                                                            aria-label="Close">
                                                            <span aria-hidden="true">&times;</span>
                                                        </button>
                                                    </div>
                                                    <div class="modal-body">
                                                        ...
                                                    </div>
                                                    <div class="modal-footer">
                                                        <button type="button" class="btn btn-secondary"
                                                            data-dismiss="modal">No</button>
                                                        <button type="button"
                                                            class="btn btn-primary delete-confirm-button"
                                                            data-dismiss="modal">Yes</button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <fieldset class="pt-0">
                                            <h5 class="py-50">Enter your Rent Details</h5>
                                            <div class="row">
                                                <div class="col-12">
                                                    <div class="form-group">
                                                        <label for="property-expected-rent">Expected Rent</label>
                                                        <div class="input-group mb-0">
                                                            <div class="input-group-prepend">
                                                                <span class="input-group-text"
                                                                    id="basic-addon1">$</span>
                                                            </div>
                                                            <input type="number" step="1" min="0" class="form-control"
                                                                id="property-expected-rent"
                                                                value="{{stage_rent.expected_rent}}"
                                                                name="property-expected-rent"
                                                                placeholder="Enter Your Rent" aria-label="Rent"
                                                                aria-describedby="basic-addon1">
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </fieldset>

                                    </div>
                                </form>
                            </div>
                        </div>
                        {% endif %}


                        {% if stage_tenant %}
                        <div class="card">
                            <div class="card-content">
                                <form class="form-stage" data-api_url="{% url 'property-api:stage-tenant' %}"
                                    data-name="Tenant Stage">
                                    <div class="card-header user-profile-header">
                                        <div class="d-inline-block mt-25">
                                            <h6 class="mb-0 text-bold-500">Tenant Stage</h6>
                                        </div>
                                        <div class="float-right">
                                            <button class="btn btn-warning edit-button">Edit</button>
                                            <button class="btn btn-success save-button"
                                                style="display: none;">Save</button>
                                            <button class="ml-1 btn btn-danger delete-button float-right"
                                                data-toggle="modal" data-target="#delete-4">Delete</button>
                                        </div>
                                    </div>
                                    <div class="card-body py-0">
                                        <div class="modal fade" id="delete-4" tabindex="-1" role="dialog"
                                            aria-labelledby="delete-4Label" aria-hidden="true">
                                            <div class="modal-dialog" role="document">
                                                <div class="modal-content">
                                                    <div class="modal-header">
                                                        <h5 class="modal-title" id="delete-4Label">Are you sure? You are
                                                            deleting Tenant Stage</h5>
                                                        <button type="button" class="close" data-dismiss="modal"
                                                            aria-label="Close">
                                                            <span aria-hidden="true">&times;</span>
                                                        </button>
                                                    </div>
                                                    <div class="modal-body">
                                                        ...
                                                    </div>
                                                    <div class="modal-footer">
                                                        <button type="button" class="btn btn-danger"
                                                            data-dismiss="modal">No</button>
                                                        <button type="button"
                                                            class="btn btn-success delete-confirm-button"
                                                            data-dismiss="modal">Yes</button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <fieldset class="pt-0">
                                            <h5 class="py-50">Enter your Tenant Details</h5>
                                            <div class="row">
                                                <div class="col-12">
                                                    <div class="form-group">
                                                        <label for="property-actual-rent">Actual Rent</label>
                                                        <div class="input-group mb-0">
                                                            <div class="input-group-prepend">
                                                                <span class="input-group-text"
                                                                    id="basic-addon1">$</span>
                                                            </div>
                                                            <input type="number" step="1" min="0" class="form-control"
                                                                id="property-actual-rent"
                                                                value="{{stage_tenant.actual_rent}}"
                                                                name="property-actual-rent"
                                                                placeholder="Enter Your Actual Rent"
                                                                aria-label="Actual Rent"
                                                                aria-describedby="basic-addon1">
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-12">
                                                    <div class="form-group">
                                                        <label for="property-tenant-description">Description</label>
                                                        <textarea type="text" rows="3" class="form-control"
                                                            id="property-tenant-description"
                                                            name="property-tenant-description"
                                                            placeholder="Enter Your Description">{{stage_tenant.description}}</textarea>
                                                    </div>
                                                </div>
                                            </div>
                                        </fieldset>

                                    </div>
                                </form>
                            </div>
                        </div>
                        {% endif %}

                    </div>
                </div>
            </section>
        </div>
    </div>
</div>

<!--primary theme Modal -->


{% endblock content %}

{% block javascript %}

{% expense_tables_count as expense_tables_count %}
{% monthly_maintenance_model_count as monthly_maintenance_model_count %}
{% tenant_monthly_maintenance_model_count as tenant_monthly_maintenance_model_count %}

<script type="text/javascript">
    function preview_Timage() {
        var total_image = document.getElementById("image_upload").files.length;
        var html_prev = `<div style="width:452px; background-color:white; height:183px; overflow:auto;">
            <div style="width: 2000px; height: 90px;">`;
        for (var i = 0; i < total_image; i++)
        {
            html_prev += `<img style="margin-right: 5px" src="${URL.createObjectURL(event.target.files[i])}" width="100" height="100" alt="" />`;
        }
        html_prev += `</div></div>`;
        $('#preview').html(html_prev);
        $('#preview').css('display', 'block');
    }
    function block_card(block_ele) {
        $(block_ele).block({
            message: '<div class="semibold"><span class="bx bx-revision icon-spin text-left"></span>&nbsp; Saving data ...</div>',
            fadeIn: 500,
            fadeOut: 500,
            // timeout: 2000, //unblock after 2 seconds
            overlayCSS: {
                backgroundColor: '#fff',
                opacity: 0.8,
                cursor: 'wait'
            },
            css: {
                border: 0,
                padding: '10px 15px',
                color: '#fff',
                width: 'auto',
                backgroundColor: '#333'
            }
        });
    }
    csrfMiddlewaretoken = document.getElementsByName("csrfmiddlewaretoken")[0].value;
    $(document).ready(function () {
        $('#ajax_image_upload').submit(function (e) {
            e.preventDefault();
            var block_ele = $(this).closest('body');
            block_card(block_ele);
            var data = new FormData($('#ajax_image_upload').get(0));
            $.ajaxSetup({
                headers: {
                    'X-CSRFToken': csrfMiddlewaretoken
                }
            });
            $.ajax({
                url: '/properties/image_upload/',
                type: 'POST',
                data: data,
                processData: false,
                contentType: false,
                success: function (data) {
                    window.location.reload(true);
                },
                error: function (data) {
                    alert("ERROR");
                },
            });

        });
    });

    $('body').click(function (evt) {
        if (!$(evt.target).is('.modal'))
        {
        }
        else
        {
            $('#image_upload').val('');
            $('#preview').html('');
        }
    });

</script>
<script type="text/javascript">
    $('.modal-submit-button').click(function (e) {
        var form = $(this).closest('.form-stage');
        $(form).submit();
    });

    $('.edit-button').click(function (e) {
        e.preventDefault();
        $(this).hide();
        $(this).siblings('.save-button').show();
        let closest_form = $(this).closest('form');
        $(closest_form).find('input, textarea, select').attr('disabled', false)
    });

    $('.save-button').click(function (e) {
        e.preventDefault();
        $(this).hide();
        $(this).siblings('.edit-button').show();
        let closest_form = $(this).closest('form');
        
        $(closest_form).submit();
        $(closest_form).find('input, textarea, select').attr('disabled', 'disabled')
    });

    function block_card(block_ele, message = "Saving data ...") {
        $(block_ele).block({
            message: `<div class="semibold"><span class="bx bx-revision icon-spin text-left"></span>&nbsp; ${message}</div>`,
            fadeIn: 1000,
            fadeOut: 1000,
            // timeout: 2000, //unblock after 2 seconds
            overlayCSS: {
                backgroundColor: '#fff',
                opacity: 0.8,
                cursor: 'wait'
            },
            css: {
                border: 0,
                padding: '10px 15px',
                color: '#fff',
                width: 'auto',
                backgroundColor: '#333'
            }
        });
    }
    $('.form-stage').submit(function (e) {
        e.preventDefault();
        ajax_save_data($(this));
    });
    $('.delete-button').click(function (e) {
        e.preventDefault();
    });
    $('.delete-confirm-button').click(function (e) {
        let closest_form = $(this).closest('form');
        ajax_delete_stage(closest_form);
    });
    function ajax_delete_stage(_this) {
        var block_ele = $(_this).closest('.card');

        let api_url = $(_this).data('api_url');
        let name = $(_this).data('name');
        var reload = 'true';

        block_card(block_ele, `Deleting ${name}....`);

        $.ajax({
            url: api_url,
            method: 'DELETE',
            beforeSend: function (xhr) {
                xhr.setRequestHeader("X-CSRFToken", `{{csrf_token}}`);
                xhr.setRequestHeader('property-id', '{{property.id}}');

            },
            success: function (response) {
                iziToast.success({
                    title: 'Saved',
                    message: `Deleted ${name}`,
                });
                if (reload)
                {
                    location.reload();
                }
            },
            error: function (response) {
                iziToast.error({
                    title: 'Error',
                    message: `Error occurred while deleting ${name}`,
                });

            },
            complete: function (response) {
                $(block_ele).unblock();
            }
        })
    }

    function ajax_save_data(_this) {
        var block_ele = $(_this).closest('.card');

        block_card(block_ele);

        let data = $(_this).serialize();
        data += `&property_id={{property.id}}`;
        data += `&csrfmiddlewaretoken={{csrf_token}}`;

        let api_url = $(_this).data('api_url');
        let name = $(_this).data('name');
        var reload = $(_this).data('reload');

        $.ajax({
            url: api_url,
            method: 'POST',
            data: data,
            success: function (response) {
                iziToast.success({
                    title: 'Saved',
                    message: `Successfully inserted ${name} data`,
                });
                if (reload)
                {
                    location.reload();
                }
            },
            error: function (response) {
                iziToast.error({
                    title: 'Error',
                    message: `Error occurred while inserting ${name} data`,
                });

            },
            complete: function (response) {
                $(block_ele).unblock();
            }
        });
    }

    $('#stage-form').submit(function (e) {
        e.preventDefault();
        var block_ele = $(this).closest('.card');

        block_card(block_ele);

        let data = $(this).serialize();
        data += `&property_id={{property.id}}`;
        data += `&csrfmiddlewaretoken={{csrf_token}}`;

        all_stages = [
            {
                name: 'Stage Opportunity',
                api_url: `{% url 'property-api:stage-opportunity' %}`,
            },

            {
                name: 'Stage Buying',
                api_url: `{% url 'property-api:stage-buying' %}`,
            },

            {
                name: 'Stage Rent',
                api_url: `{% url 'property-api:stage-rent' %}`,
            },

            {
                name: 'Stage Tenant',
                api_url: `{% url 'property-api:stage-tenant' %}`,
            },

        ]
        all_stages.forEach(obj => {
            $.ajax({
                url: obj['api_url'],
                method: 'POST',
                data: data,
                success: function (response) {
                    iziToast.success({
                        title: 'Saved',
                        message: `Successfully inserted ${obj['name']} data`,
                    });
                },
                error: function (response) {
                    iziToast.error({
                        title: 'Error',
                        message: `Error occurred while inserting ${obj['name']} data`,
                    });

                },
                complete: function (response) {
                    $('#stage-card').unblock()
                }
            })
        });
    });

    renovationTeamListTable = $("#renovation-team-list").DataTable({
        "processing": true,
        "serverSide": true,
        "autoWidth": true,
        "ajax": {
            url: "{% url 'property-api:renovation-team-list' %}",
            type: 'GET',
            data: function (d) {
                d.page_num = getPageNumber();
                d.property_id = `{{property.id}}`;
            }
        },
        "order": [],
        "columnDefs": [
            {
                "render": function (data, type, row) {
                    return row['company_name'];
                },
                "targets": 0
            },
            {
                "render": function (data, type, row) {
                    return row['created_date'];
                },
                "targets": 1
            },
            {
                "orderable": false,
                "render": function (data, type, row) {

                    action = `
                        <div class="text-center">
                            <a class="text-dark text-decoration-none" href="#" data-toggle="modal" data-target="#renovationTeamEditModal-${row['id']}">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-edit align-middle mr-2" data-toggle="tooltip" data-original-title="Edit"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path></svg>
                            </a>
                            <div class="modal fade text-left" id="renovationTeamEditModal-${row['id']}" tabindex="-1" role="dialog" aria-hidden="true">
                                <div class="modal-dialog modal-dialog-centered" role="document">
                                    <div class="modal-content">
                                        <form class="form-team-update" data-name="Renovation Team" data-api_url="{% url 'property-api:renovation-team-update' %}" data-reload="false">
                                            <div class="modal-header">
                                                <h5 class="modal-title" id="create-renovation-team">Create Renovation Team</h5>
                                                <button type="button" class="close" data-dismiss="modal"
                                                    aria-label="Cancel">
                                                    <span aria-hidden="true">&times;</span>
                                                </button>
                                            </div>
                                            <div class="modal-body">
                                                <div class="form-group">
                                                    <input type="text"
                                                        class="form-control"
                                                        value="${row['id']}"
                                                        name="renovation-team-id"
                                                        placeholder="Renovation Team ID" style="display:none;">
                                                    <label
                                                        for="company-name">Company Name</label>
                                                    <input type="text"
                                                        class="form-control"
                                                        value="${row['company_name']}"
                                                        id="company-name"
                                                        name="company-name"
                                                        placeholder="Enter Name of Company" autocomplete="off">
                                                </div>
                                            </div>
                                            <div class="modal-footer">
                                                <button type="button" class="btn btn-danger"
                                                data-dismiss="modal">Cancel</button>
                                                <button type="button"
                                                class="btn btn-success team-update-button"
                                                data-dismiss="modal">Update</button>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>`;

                    return action;
                },
                "targets": 2
            },
        ],

        "createdRow": function (row, data, dataIndex) {
        },

        "initComplete": function (settings, json) {
            // load_listeners();
            renovationTeamListTable.page(getPageNumber() - 1).draw('page');
        }
    });
    // xp = renovationTeamListTable;

    renovationTeamListTable.on('draw', function () {
        renovationTeamListTable.columns.adjust();
    });

    $('.sidebar-toggle').click(function () {
        renovationTeamListTable.columns.adjust();
    });

    $('#renovation-team-list').on('page.dt', function () {
        const info = renovationTeamListTable.page.info();
        const page_number = info.page + 1;
        const queryString = getQueryString([{ 'key': 'page', 'value': page_number }]);
        // history.replaceState(page_number, queryString, `./${queryString}`);
    });
    $('#renovation-team-list').on('length.dt', function (e, settings, len) {
        const queryString = getQueryString([{ 'key': 'page', 'value': 1 }]);
        // history.replaceState({id: null}, queryString, `./${queryString}`);
    });
    $('#renovation-team-list').on('search.dt', function (e, settings, len) {
        const queryString = getQueryString([{ 'key': 'page', 'value': 1 }]);
        // history.replaceState({id: null}, queryString, `./${queryString}`);
    });

    $(document).on('click', '.team-update-button', function (e) {
        let form = $(this).closest('form');
        $(form).submit();
    });

    $(document).on('submit', '.form-team-update', function (e) {
        e.preventDefault();
        ajax_save_data($(this));
    });


    // Dynamic Expense tables
    var expense_tables_count = parseInt('{{ expense_tables_count }}');
    
    for (let i = 1; i <= expense_tables_count; i++)
    {
        let expense_table = `#expense-table-${i}`;
        
        let ExpenseTableListTable = $(expense_table).DataTable({
            "processing": true,
            "serverSide": true,
            "autoWidth": true,
            "ajax": {
                url: "{% url 'property-api:renovation-team-expenses-list' %}",
                type: 'GET',
                data: function (d) {
                    d.page_num = getPageNumber();
                    console.log(expense_table)
                    d.expense_table_id = $(expense_table).data('expense-table-id');
                }
            },
            "order": [],
            "columnDefs": [
                {
                    "render": function (data, type, row) {
                        return row['title'];
                    },
                    "targets": 0
                },
                {
                    "render": function (data, type, row) {
                        return row['description'];
                    },
                    "targets": 1
                },
                {
                    "render": function (data, type, row) {
                        return row['amount'];
                    },
                    "targets": 2
                },
                {
                    "render": function (data, type, row) {
                        return row['currency'];
                    },
                    "targets": 3
                },
                {
                    "render": function (data, type, row) {
                        return row['account'];
                    },
                    "targets": 4
                },
                {
                    "render": function (data, type, row) {
                        return row['date'];
                    },
                    "targets": 5
                },
                {
                    "render": function (data, type, row) {
                        return row['store'];
                    },
                    "targets": 6
                },
                {
                    "render": function (data, type, row) {
                        return row['order_date'];
                    },
                    "targets": 7
                },
                {
                    "render": function (data, type, row) {
                        return row['delivery_date'];
                    },
                    "targets": 8
                },
                {
                    "render": function (data, type, row) {
                        return row['company'];
                    },
                    "targets": 9
                },
            ],

            "createdRow": function (row, data, dataIndex) {
            },

            "initComplete": function (settings, json) {
                ExpenseTableListTable.page(getPageNumber() - 1).draw('page');
            }
        });
        ExpenseTableListTable.on('draw', function () {
            ExpenseTableListTable.columns.adjust();
        });

        $('.sidebar-toggle').click(function () {
            ExpenseTableListTable.columns.adjust();
        });

        $(expense_table).on('page.dt', function () {
            const info = ExpenseTableListTable.page.info();
            const page_number = info.page + 1;
            const queryString = getQueryString([{ 'key': 'page', 'value': page_number }]);
            // history.replaceState(page_number, queryString, `./${queryString}`);
        });
        $(expense_table).on('length.dt', function (e, settings, len) {
            const queryString = getQueryString([{ 'key': 'page', 'value': 1 }]);
            // history.replaceState({id: null}, queryString, `./${queryString}`);
        });
        $(expense_table).on('search.dt', function (e, settings, len) {
            const queryString = getQueryString([{ 'key': 'page', 'value': 1 }]);
            // history.replaceState({id: null}, queryString, `./${queryString}`);
        });
        // ExpenseTableListTable.ajax.reload();
    }

    // Dynamic Monthly Maintenance Model tables
    var monthly_maintenance_model_count = parseInt('{{ monthly_maintenance_model_count }}');
    
    for (let i = 1; i <= monthly_maintenance_model_count; i++)
    {
        let monthly_maintenance_model = `#monthly_maintenance_model-datatable-${i}`;
    
        let MonthlyMaintenanceListTable = $(monthly_maintenance_model).DataTable({
            "processing": true,
            "serverSide": true,
            "autoWidth": true,
            "ajax": {
                url: "{% url 'property-api:monthly-maintenance-list' %}",
                type: 'GET',
                data: function (d) {
                    d.page_num = getPageNumber();
                    d.monthly_maintenance_model_id = $(monthly_maintenance_model).data('monthly_maintenance_model_id');
                }
            },
            "order": [],
            "columnDefs": [
                {
                    "render": function (data, type, row) {
                        
                        return row['title'];
                    },
                    "targets": 0
                },
                {
                    "render": function (data, type, row) {
                        return row['description'];
                    },
                    "targets": 1
                },
                {
                    "render": function (data, type, row) {
                        return row['amount'];
                    },
                    "targets": 2
                },
                {
                    "render": function (data, type, row) {
                        return row['currency'];
                    },
                    "targets": 3
                },
                {
                    "render": function (data, type, row) {
                        return row['account'];
                    },
                    "targets": 4
                },
                {
                    "render": function (data, type, row) {
                        return row['date'];
                    },
                    "targets": 5
                },
            ],

            "createdRow": function (row, data, dataIndex) {
            },

            "initComplete": function (settings, json) {
                MonthlyMaintenanceListTable.page(getPageNumber() - 1).draw('page');
            }
        });
        
        MonthlyMaintenanceListTable.on('draw', function () {
            MonthlyMaintenanceListTable.columns.adjust();
        });
        

        $('.sidebar-toggle').click(function () {
            MonthlyMaintenanceListTable.columns.adjust();
        });
        
        $(monthly_maintenance_model).on('page.dt', function () {
            const info = MonthlyMaintenanceListTable.page.info();
            const page_number = info.page + 1;
            const queryString = getQueryString([{ 'key': 'page', 'value': page_number }]);
            // history.replaceState(page_number, queryString, `./${queryString}`);
        });
        
        $(monthly_maintenance_model).on('length.dt', function (e, settings, len) {
            const queryString = getQueryString([{ 'key': 'page', 'value': 1 }]);
            // history.replaceState({id: null}, queryString, `./${queryString}`);
        });
        
        $(monthly_maintenance_model).on('search.dt', function (e, settings, len) {
            const queryString = getQueryString([{ 'key': 'page', 'value': 1 }]);
            // history.replaceState({id: null}, queryString, `./${queryString}`);
        });
        
        // MonthlyMaintenanceListTable.ajax.reload();
    }

    // Dynamic Tenant Monthly Maintenance Model tables
    var tenant_monthly_maintenance_model_count = JSON.parse(`{{tenant_monthly_maintenance_model_count}}`);
    
    tenant_monthly_maintenance_model_count.forEach(function(i) {
        let tenant_monthly_maintenance_model = `#tenant_monthly_maintenance_model-datatable-${i}`;
        
        let TenantMonthlyMaintenanceListTable = $(tenant_monthly_maintenance_model).DataTable({
            "processing": true,
            "serverSide": true,
            "autoWidth": true,
            "ajax": {
                url: "{% url 'property-api:tenant-monthly-maintenance-list' %}",
                type: 'GET',
                data: function (d) {
                    d.page_num = getPageNumber();
                    d.tenant_monthly_maintenance_model_id = $(tenant_monthly_maintenance_model).data('tenant_monthly_maintenance_model_id');
                }
            },
            "order": [],
            "columnDefs": [
                {
                    "render": function (data, type, row) {
                        
                        return row['title'];
                    },
                    "targets": 0
                },
                {
                    "render": function (data, type, row) {
                        return row['description'];
                    },
                    "targets": 1
                },
                {
                    "render": function (data, type, row) {
                        return row['amount'];
                    },
                    "targets": 2
                },
                {
                    "render": function (data, type, row) {
                        return row['currency'];
                    },
                    "targets": 3
                },
                {
                    "render": function (data, type, row) {
                        return row['account'];
                    },
                    "targets": 4
                },
                {
                    "render": function (data, type, row) {
                        return row['date'];
                    },
                    "targets": 5
                },
            ],

            "createdRow": function (row, data, dataIndex) {
            },

            "initComplete": function (settings, json) {
                TenantMonthlyMaintenanceListTable.page(getPageNumber() - 1).draw('page');
            }
        });
        
        TenantMonthlyMaintenanceListTable.on('draw', function () {
            TenantMonthlyMaintenanceListTable.columns.adjust();
        });
        

        $('.sidebar-toggle').click(function () {
            TenantMonthlyMaintenanceListTable.columns.adjust();
        });
        
        $(monthly_maintenance_model).on('page.dt', function () {
            const info = TenantMonthlyMaintenanceListTable.page.info();
            const page_number = info.page + 1;
            const queryString = getQueryString([{ 'key': 'page', 'value': page_number }]);
            // history.replaceState(page_number, queryString, `./${queryString}`);
        });
        
        $(monthly_maintenance_model).on('length.dt', function (e, settings, len) {
            const queryString = getQueryString([{ 'key': 'page', 'value': 1 }]);
            // history.replaceState({id: null}, queryString, `./${queryString}`);
        });
        
        $(monthly_maintenance_model).on('search.dt', function (e, settings, len) {
            const queryString = getQueryString([{ 'key': 'page', 'value': 1 }]);
            // history.replaceState({id: null}, queryString, `./${queryString}`);
        });
        
        // TenantMonthlyMaintenanceListTable.ajax.reload();
    })
</script>




{% endblock javascript %}